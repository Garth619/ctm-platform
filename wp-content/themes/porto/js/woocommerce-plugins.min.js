!function(o,e){"function"==typeof define&&define.amd?define(["jquery"],e):e(o.jQuery)}(this,function(o){"use strict";function e(e){if(i.webkit&&!e)return{height:0,width:0};if(!i.data.outer){var t={border:"none","box-sizing":"content-box",height:"200px",margin:"0",padding:"0",width:"200px"};i.data.inner=o("<div>").css(o.extend({},t)),i.data.outer=o("<div>").css(o.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},t)).append(i.data.inner).appendTo("body")}return i.data.outer.scrollLeft(1e3).scrollTop(1e3),{height:Math.ceil(i.data.outer.offset().top-i.data.inner.offset().top||0),width:Math.ceil(i.data.outer.offset().left-i.data.inner.offset().left||0)}}function t(o){var e=o.originalEvent;return(!e.axis||e.axis!==e.HORIZONTAL_AXIS)&&!e.wheelDeltaX}var i={data:{index:0,name:"scrollbar"},macosx:/mac/i.test(navigator.platform),mobile:/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent),overlay:null,scroll:null,scrolls:[],webkit:/webkit/i.test(navigator.userAgent)&&!/edge\/\d+/i.test(navigator.userAgent)};i.scrolls.add=function(o){this.remove(o).push(o)},i.scrolls.remove=function(e){for(;o.inArray(e,this)>=0;)this.splice(o.inArray(e,this),1);return this};var n={autoScrollSize:!0,autoUpdate:!0,debug:!1,disableBodyScroll:!1,duration:200,ignoreMobile:!0,ignoreOverlay:!0,scrollStep:30,showArrows:!1,stepScrolling:!0,scrollx:null,scrolly:null,onDestroy:null,onInit:null,onScroll:null,onUpdate:null},s=function(t){i.scroll||(i.overlay=function(){var o=e(!0);return!(o.height||o.width)}(),i.scroll=e(),a(),o(window).resize(function(){var o=!1;if(i.scroll&&(i.scroll.height||i.scroll.width)){var t=e();t.height===i.scroll.height&&t.width===i.scroll.width||(i.scroll=t,o=!0)}a(o)})),this.container=t,this.namespace=".scrollbar_"+i.data.index++,this.options=o.extend({},n,window.jQueryScrollbarOptions||{}),this.scrollTo=null,this.scrollx={},this.scrolly={},t.data(i.data.name,this),i.scrolls.add(this)};s.prototype={destroy:function(){if(this.wrapper){this.container.removeData(i.data.name),i.scrolls.remove(this);var e=this.container.scrollLeft(),t=this.container.scrollTop();this.container.insertBefore(this.wrapper).css({height:"",margin:"","max-height":""}).removeClass("scroll-content scroll-scrollx_visible scroll-scrolly_visible").off(this.namespace).scrollLeft(e).scrollTop(t),this.scrollx.scroll.removeClass("scroll-scrollx_visible").find("div").andSelf().off(this.namespace),this.scrolly.scroll.removeClass("scroll-scrolly_visible").find("div").andSelf().off(this.namespace),this.wrapper.remove(),o(document).add("body").off(this.namespace),o.isFunction(this.options.onDestroy)&&this.options.onDestroy.apply(this,[this.container])}},init:function(e){var n=this,s=this.container,r=this.containerWrapper||s,a=this.namespace,l=o.extend(this.options,e||{}),h={x:this.scrollx,y:this.scrolly},d=this.wrapper,c={scrollLeft:s.scrollLeft(),scrollTop:s.scrollTop()};if(i.mobile&&l.ignoreMobile||i.overlay&&l.ignoreOverlay||i.macosx&&!i.webkit)return!1;if(d)r.css({height:"auto","margin-bottom":-1*i.scroll.height+"px","margin-right":-1*i.scroll.width+"px","max-height":""});else{if(this.wrapper=d=o("<div>").addClass("scroll-wrapper").addClass(s.attr("class")).css("position","absolute"==s.css("position")?"absolute":"relative").insertBefore(s).append(s),s.is("textarea")&&(this.containerWrapper=r=o("<div>").insertBefore(s).append(s),d.addClass("scroll-textarea")),r.addClass("scroll-content").css({height:"auto","margin-bottom":-1*i.scroll.height+"px","margin-right":-1*i.scroll.width+"px","max-height":""}),s.on("scroll"+a,function(e){o.isFunction(l.onScroll)&&l.onScroll.call(n,{maxScroll:h.y.maxScrollOffset,scroll:s.scrollTop(),size:h.y.size,visible:h.y.visible},{maxScroll:h.x.maxScrollOffset,scroll:s.scrollLeft(),size:h.x.size,visible:h.x.visible}),h.x.isVisible&&h.x.scroll.bar.css("left",s.scrollLeft()*h.x.kx+"px"),h.y.isVisible&&h.y.scroll.bar.css("top",s.scrollTop()*h.y.kx+"px")}),d.on("scroll"+a,function(){d.scrollTop(0).scrollLeft(0)}),l.disableBodyScroll){var p=function(o){t(o)?h.y.isVisible&&h.y.mousewheel(o):h.x.isVisible&&h.x.mousewheel(o)};d.on("MozMousePixelScroll"+a,p),d.on("mousewheel"+a,p),i.mobile&&d.on("touchstart"+a,function(e){var t=e.originalEvent.touches&&e.originalEvent.touches[0]||e,i={pageX:t.pageX,pageY:t.pageY},n={left:s.scrollLeft(),top:s.scrollTop()};o(document).on("touchmove"+a,function(o){var e=o.originalEvent.targetTouches&&o.originalEvent.targetTouches[0]||o;s.scrollLeft(n.left+i.pageX-e.pageX),s.scrollTop(n.top+i.pageY-e.pageY),o.preventDefault()}),o(document).on("touchend"+a,function(){o(document).off(a)})})}o.isFunction(l.onInit)&&l.onInit.apply(this,[s])}o.each(h,function(e,i){var r=null,d=1,c="x"===e?"scrollLeft":"scrollTop",p=l.scrollStep,g=function(){var o=s[c]();s[c](o+p),1==d&&o+p>=m&&(o=s[c]()),-1==d&&o+p<=m&&(o=s[c]()),s[c]()==o&&r&&r()},m=0;i.scroll||(i.scroll=n._getScroll(l["scroll"+e]).addClass("scroll-"+e),l.showArrows&&i.scroll.addClass("scroll-element_arrows_visible"),i.mousewheel=function(o){if(!i.isVisible||"x"===e&&t(o))return!0;if("y"===e&&!t(o))return h.x.mousewheel(o),!0;var r=-1*o.originalEvent.wheelDelta||o.originalEvent.detail,a=i.size-i.visible-i.offset;return(r>0&&m<a||r<0&&m>0)&&((m+=r)<0&&(m=0),m>a&&(m=a),n.scrollTo=n.scrollTo||{},n.scrollTo[c]=m,setTimeout(function(){n.scrollTo&&(s.stop().animate(n.scrollTo,240,"linear",function(){m=s[c]()}),n.scrollTo=null)},1)),o.preventDefault(),!1},i.scroll.on("MozMousePixelScroll"+a,i.mousewheel).on("mousewheel"+a,i.mousewheel).on("mouseenter"+a,function(){m=s[c]()}),i.scroll.find(".scroll-arrow, .scroll-element_track").on("mousedown"+a,function(t){if(1!=t.which)return!0;d=1;var a={eventOffset:t["x"===e?"pageX":"pageY"],maxScrollValue:i.size-i.visible-i.offset,scrollbarOffset:i.scroll.bar.offset()["x"===e?"left":"top"],scrollbarSize:i.scroll.bar["x"===e?"outerWidth":"outerHeight"]()},h=0,f=0;return o(this).hasClass("scroll-arrow")?(d=o(this).hasClass("scroll-arrow_more")?1:-1,p=l.scrollStep*d,m=d>0?a.maxScrollValue:0):(d=a.eventOffset>a.scrollbarOffset+a.scrollbarSize?1:a.eventOffset<a.scrollbarOffset?-1:0,p=Math.round(.75*i.visible)*d,m=a.eventOffset-a.scrollbarOffset-(l.stepScrolling?1==d?a.scrollbarSize:0:Math.round(a.scrollbarSize/2)),m=s[c]()+m/i.kx),n.scrollTo=n.scrollTo||{},n.scrollTo[c]=l.stepScrolling?s[c]()+p:m,l.stepScrolling&&(r=function(){m=s[c](),clearInterval(f),clearTimeout(h),h=0,f=0},h=setTimeout(function(){f=setInterval(g,40)},l.duration+100)),setTimeout(function(){n.scrollTo&&(s.animate(n.scrollTo,l.duration),n.scrollTo=null)},1),n._handleMouseDown(r,t)}),i.scroll.bar.on("mousedown"+a,function(t){if(1!=t.which)return!0;var r=t["x"===e?"pageX":"pageY"],l=s[c]();return i.scroll.addClass("scroll-draggable"),o(document).on("mousemove"+a,function(o){var t=parseInt((o["x"===e?"pageX":"pageY"]-r)/i.kx,10);s[c](l+t)}),n._handleMouseDown(function(){i.scroll.removeClass("scroll-draggable"),m=s[c]()},t)}))}),o.each(h,function(o,e){var t="scroll-scroll"+o+"_visible",i="x"==o?h.y:h.x;e.scroll.removeClass(t),i.scroll.removeClass(t),r.removeClass(t)}),o.each(h,function(e,t){o.extend(t,"x"==e?{offset:parseInt(s.css("left"),10)||0,size:s.prop("scrollWidth"),visible:d.width()}:{offset:parseInt(s.css("top"),10)||0,size:s.prop("scrollHeight"),visible:d.height()})}),this._updateScroll("x",this.scrollx),this._updateScroll("y",this.scrolly),o.isFunction(l.onUpdate)&&l.onUpdate.apply(this,[s]),o.each(h,function(o,e){var t="x"===o?"left":"top",i="x"===o?"outerWidth":"outerHeight",n="x"===o?"width":"height",r=parseInt(s.css(t),10)||0,a=e.size,h=e.visible+r,d=e.scroll.size[i]()+(parseInt(e.scroll.size.css(t),10)||0);l.autoScrollSize&&(e.scrollbarSize=parseInt(d*h/a,10),e.scroll.bar.css(n,e.scrollbarSize+"px")),e.scrollbarSize=e.scroll.bar[i](),e.kx=(d-e.scrollbarSize)/(a-h)||1,e.maxScrollOffset=a-h}),s.scrollLeft(c.scrollLeft).scrollTop(c.scrollTop).trigger("scroll")},_getScroll:function(e){var t={advanced:['<div class="scroll-element">','<div class="scroll-element_corner"></div>','<div class="scroll-arrow scroll-arrow_less"></div>','<div class="scroll-arrow scroll-arrow_more"></div>','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_inner-wrapper">','<div class="scroll-element_inner scroll-element_track">','<div class="scroll-element_inner-bottom"></div>',"</div>","</div>",'<div class="scroll-bar">','<div class="scroll-bar_body">','<div class="scroll-bar_body-inner"></div>',"</div>",'<div class="scroll-bar_bottom"></div>','<div class="scroll-bar_center"></div>',"</div>","</div>","</div>"].join(""),simple:['<div class="scroll-element">','<div class="scroll-element_outer">','<div class="scroll-element_size"></div>','<div class="scroll-element_track"></div>','<div class="scroll-bar"></div>',"</div>","</div>"].join("")};return t[e]&&(e=t[e]),e||(e=t.simple),e="string"==typeof e?o(e).appendTo(this.wrapper):o(e),o.extend(e,{bar:e.find(".scroll-bar"),size:e.find(".scroll-element_size"),track:e.find(".scroll-element_track")}),e},_handleMouseDown:function(e,t){var i=this.namespace;return o(document).on("blur"+i,function(){o(document).add("body").off(i),e&&e()}),o(document).on("dragstart"+i,function(o){return o.preventDefault(),!1}),o(document).on("mouseup"+i,function(){o(document).add("body").off(i),e&&e()}),o("body").on("selectstart"+i,function(o){return o.preventDefault(),!1}),t&&t.preventDefault(),!1},_updateScroll:function(e,t){var n=this.container,s=this.containerWrapper||n,r="scroll-scroll"+e+"_visible",a="x"===e?this.scrolly:this.scrollx,l=parseInt(this.container.css("x"===e?"left":"top"),10)||0,h=this.wrapper,d=t.size,c=t.visible+l;t.isVisible=d-c>1,t.isVisible?(t.scroll.addClass(r),a.scroll.addClass(r),s.addClass(r)):(t.scroll.removeClass(r),a.scroll.removeClass(r),s.removeClass(r)),"y"===e&&(n.is("textarea")||d<c?s.css({height:c+i.scroll.height+"px","max-height":"none"}):s.css({"max-height":c+i.scroll.height+"px"})),t.size==n.prop("scrollWidth")&&a.size==n.prop("scrollHeight")&&t.visible==h.width()&&a.visible==h.height()&&t.offset==(parseInt(n.css("left"),10)||0)&&a.offset==(parseInt(n.css("top"),10)||0)||(o.extend(this.scrollx,{offset:parseInt(n.css("left"),10)||0,size:n.prop("scrollWidth"),visible:h.width()}),o.extend(this.scrolly,{offset:parseInt(n.css("top"),10)||0,size:this.container.prop("scrollHeight"),visible:h.height()}),this._updateScroll("x"===e?"y":"x",a))}};var r=s;o.fn.scrollbar=function(e,t){return"string"!=typeof e&&(t=e,e="init"),void 0===t&&(t=[]),o.isArray(t)||(t=[t]),this.not("body, .scroll-wrapper").each(function(){var n=o(this),s=n.data(i.data.name);(s||"init"===e)&&(s||(s=new r(n)),s[e]&&s[e].apply(s,t))}),this},o.fn.scrollbar.options=n;var a=function(){var o=0,e=0;return function(t){var n,s,r,l,h,d,c;for(n=0;n<i.scrolls.length;n++)s=(l=i.scrolls[n]).container,r=l.options,h=l.wrapper,d=l.scrollx,c=l.scrolly,(t||r.autoUpdate&&h&&h.is(":visible")&&(s.prop("scrollWidth")!=d.size||s.prop("scrollHeight")!=c.size||h.width()!=d.visible||h.height()!=c.visible))&&(l.init(),r.debug&&(window.console&&console.log({scrollHeight:s.prop("scrollHeight")+":"+l.scrolly.size,scrollWidth:s.prop("scrollWidth")+":"+l.scrollx.size,visibleHeight:h.height()+":"+l.scrolly.visible,visibleWidth:h.width()+":"+l.scrollx.visible},!0),e++));clearTimeout(o),o=setTimeout(a,300)}}();window.angular&&function(o){o.module("jQueryScrollbar",[]).provider("jQueryScrollbar",function(){var e=n;return{setOptions:function(t){o.extend(e,t)},$get:function(){return{options:o.copy(e)}}}}).directive("jqueryScrollbar",["jQueryScrollbar","$parse",function(o,e){return{restrict:"AC",link:function(t,i,n){var s=e(n.jqueryScrollbar)(t);i.scrollbar(s||o.options).on("$destroy",function(){i.scrollbar("destroy")})}}}])}(window.angular)}),"function"!=typeof Object.create&&(Object.create=function(o){function e(){}return e.prototype=o,new e}),function(o,e,t,i){var n={init:function(e,t){var i=this;i.elem=t,i.$elem=o(t),i.imageSrc=i.$elem.data("zoom-image")?i.$elem.data("zoom-image"):i.$elem.data("original")?i.$elem.data("original"):i.$elem.attr("href")?i.$elem.attr("href"):i.$elem.attr("src"),i.options=o.extend({},o.fn.elevateZoom.options,e),i.options.tint&&(i.options.lensColour="none",i.options.lensOpacity="1"),"inner"==i.options.zoomType&&(i.options.showLens=!1),i.options.zoomContainer?i.$container=o(i.options.zoomContainer):i.$container=o("body"),i.$elem.parent().removeAttr("title").removeAttr("alt"),i.zoomImage=i.imageSrc,i.refresh(1),o("#"+i.options.gallery+" a").click(function(e){return i.options.galleryActiveClass&&(o("#"+i.options.gallery+" a").removeClass(i.options.galleryActiveClass),o(this).addClass(i.options.galleryActiveClass)),e.preventDefault(),o(this).data("zoom-image")?i.zoomImagePre=o(this).data("zoom-image"):i.zoomImagePre=o(this).data("image"),i.swaptheimage(o(this).data("image"),i.zoomImagePre),!1})},refresh:function(o){var e=this;setTimeout(function(){e.fetch(e.imageSrc)},o||e.options.refresh)},fetch:function(o){var e=this,t=new Image;t.onload=function(){e.largeWidth=t.width,e.largeHeight=t.height,e.startZoom(),e.currentImage=e.imageSrc,e.options.onZoomedImageLoaded(e.$elem)},t.src=o},startZoom:function(){var e=this;if(e.nzWidth=e.$elem.width(),e.nzHeight=e.$elem.height(),e.isWindowActive=!1,e.isLensActive=!1,e.isTintActive=!1,e.overWindow=!1,e.options.imageCrossfade&&(e.zoomWrap=e.$elem.wrap('<div style="height:'+e.nzHeight+"px;width:"+e.nzWidth+'px;" class="zoomWrapper" />'),e.$elem.css("position","absolute")),e.zoomLock=1,e.scrollingLock=!1,e.changeBgSize=!1,e.currentZoomLevel=e.options.zoomLevel,e.nzOffset=e.$elem.offset(),e.ctOffset=e.$container.offset(),e.widthRatio=e.largeWidth/e.currentZoomLevel/e.nzWidth,e.heightRatio=e.largeHeight/e.currentZoomLevel/e.nzHeight,"window"==e.options.zoomType&&(e.zoomWindowStyle="overflow: hidden;background-position: 0px 0px;text-align:center;background-color: "+String(e.options.zoomWindowBgColour)+";width: "+String(e.options.zoomWindowWidth)+"px;height: "+String(e.options.zoomWindowHeight)+"px;float: left;background-size: "+e.largeWidth/e.currentZoomLevel+"px "+e.largeHeight/e.currentZoomLevel+"px;display: none;z-index:100;border: "+String(e.options.borderSize)+"px solid "+e.options.borderColour+";background-repeat: no-repeat;position: absolute;"),"inner"==e.options.zoomType){e.$elem.css("border-left-width");e.zoomWindowStyle="overflow: hidden;margin-left: -"+String(e.options.borderSize)+"px;margin-top: -"+String(e.options.borderSize)+"px;background-position: 0px 0px;width: "+String(e.nzWidth)+"px;height: "+String(e.nzHeight)+"px;float: left;display: none;cursor:"+e.options.cursor+";border: "+String(e.options.borderSize)+"px solid "+e.options.borderColour+";background-repeat: no-repeat;position: absolute;"}"window"==e.options.zoomType&&(e.nzHeight<e.options.zoomWindowWidth/e.widthRatio?lensHeight=e.nzHeight:lensHeight=String(e.options.zoomWindowHeight/e.heightRatio),e.largeWidth<e.options.zoomWindowWidth?lensWidth=e.nzWidth:lensWidth=e.options.zoomWindowWidth/e.widthRatio,e.lensStyle="background-position: 0px 0px;width: "+String(e.options.zoomWindowWidth/e.widthRatio)+"px;height: "+String(e.options.zoomWindowHeight/e.heightRatio)+"px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:"+e.options.lensOpacity+";filter: alpha(opacity = "+100*e.options.lensOpacity+"); zoom:1;width:"+lensWidth+"px;height:"+lensHeight+"px;background-color:"+e.options.lensColour+";cursor:"+e.options.cursor+";border: "+e.options.lensBorderSize+"px solid "+e.options.lensBorderColour+";background-repeat: no-repeat;position: absolute;"),e.tintStyle="display: block;position: absolute;background-color: "+e.options.tintColour+";filter:alpha(opacity=0);opacity: 0;width: "+e.nzWidth+"px;height: "+e.nzHeight+"px;",e.lensRound="","lens"==e.options.zoomType&&(e.lensStyle="background-position: 0px 0px;float: left;display: none;border: "+String(e.options.borderSize)+"px solid "+e.options.borderColour+";width:"+String(e.options.lensSize)+"px;height:"+String(e.options.lensSize)+"px;background-repeat: no-repeat;position: absolute;"),"round"==e.options.lensShape&&(e.lensRound="border-top-left-radius: "+String(e.options.lensSize/2+e.options.borderSize)+"px;border-top-right-radius: "+String(e.options.lensSize/2+e.options.borderSize)+"px;border-bottom-left-radius: "+String(e.options.lensSize/2+e.options.borderSize)+"px;border-bottom-right-radius: "+String(e.options.lensSize/2+e.options.borderSize)+"px;"),void 0!==e.ctOffset&&(e.$container.find(".zoomContainer").length&&e.$container.find(".zoomContainer").remove(),e.zoomContainer=o('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:'+(e.nzOffset.left-e.ctOffset.left)+"px;top:"+(e.nzOffset.top-e.ctOffset.top)+"px;height:"+e.nzHeight+"px;width:"+e.nzWidth+'px;"></div>'),e.$container.append(e.zoomContainer),e.options.containLensZoom&&"lens"==e.options.zoomType&&e.zoomContainer.css("overflow","hidden"),"inner"!=e.options.zoomType&&(e.zoomLens=o("<div class='zoomLens' style='"+e.lensStyle+e.lensRound+"'>&nbsp;</div>").appendTo(e.zoomContainer).click(function(){e.$elem.trigger("click")}),e.options.tint&&(e.tintContainer=o("<div/>").addClass("tintContainer"),e.zoomTint=o("<div class='zoomTint' style='"+e.tintStyle+"'></div>"),e.zoomLens.wrap(e.tintContainer),e.zoomTintcss=e.zoomLens.after(e.zoomTint),e.zoomTintImage=o('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: '+e.nzWidth+"px; height: "+e.nzHeight+'px;" src="'+e.imageSrc+'">').appendTo(e.zoomLens).click(function(){e.$elem.trigger("click")}))),isNaN(e.options.zoomWindowPosition)?e.zoomWindow=o("<div style='z-index:999;left:"+e.windowOffsetLeft+"px;top:"+e.windowOffsetTop+"px;"+e.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(e.$container).click(function(){e.$elem.trigger("click")}):e.zoomWindow=o("<div style='z-index:999;left:"+e.windowOffsetLeft+"px;top:"+e.windowOffsetTop+"px;"+e.zoomWindowStyle+"' class='zoomWindow'>&nbsp;</div>").appendTo(e.zoomContainer).click(function(){e.$elem.trigger("click")}),e.zoomWindowContainer=o("<div/>").addClass("zoomWindowContainer").css("width",e.options.zoomWindowWidth),e.zoomWindow.wrap(e.zoomWindowContainer),"lens"==e.options.zoomType&&e.zoomLens.css({backgroundImage:"url('"+e.imageSrc+"')"}),"window"==e.options.zoomType&&e.zoomWindow.css({backgroundImage:"url('"+e.imageSrc+"')"}),"inner"==e.options.zoomType&&e.zoomWindow.css({backgroundImage:"url('"+e.imageSrc+"')"}),e.$elem.bind("touchmove",function(o){o.preventDefault();var t=o.originalEvent.touches[0]||o.originalEvent.changedTouches[0];e.setPosition(t)}),e.zoomContainer.bind("touchmove",function(o){"inner"==e.options.zoomType&&e.showHideWindow("show"),o.preventDefault();var t=o.originalEvent.touches[0]||o.originalEvent.changedTouches[0];e.setPosition(t)}),e.zoomContainer.bind("touchend",function(o){e.showHideWindow("hide"),e.options.showLens&&e.showHideLens("hide"),e.options.tint&&"inner"!=e.options.zoomType&&e.showHideTint("hide")}),e.$elem.bind("touchend",function(o){e.showHideWindow("hide"),e.options.showLens&&e.showHideLens("hide"),e.options.tint&&"inner"!=e.options.zoomType&&e.showHideTint("hide")}),e.options.showLens&&(e.zoomLens.bind("touchmove",function(o){o.preventDefault();var t=o.originalEvent.touches[0]||o.originalEvent.changedTouches[0];e.setPosition(t)}),e.zoomLens.bind("touchend",function(o){e.showHideWindow("hide"),e.options.showLens&&e.showHideLens("hide"),e.options.tint&&"inner"!=e.options.zoomType&&e.showHideTint("hide")})),e.$elem.bind("mousemove",function(o){0==e.overWindow&&e.setElements("show"),e.lastX===o.clientX&&e.lastY===o.clientY||(e.setPosition(o),e.currentLoc=o),e.lastX=o.clientX,e.lastY=o.clientY}),e.zoomContainer.bind("mousemove",function(o){0==e.overWindow&&e.setElements("show"),e.lastX===o.clientX&&e.lastY===o.clientY||(e.setPosition(o),e.currentLoc=o),e.lastX=o.clientX,e.lastY=o.clientY}),"inner"!=e.options.zoomType&&e.zoomLens.bind("mousemove",function(o){e.lastX===o.clientX&&e.lastY===o.clientY||(e.setPosition(o),e.currentLoc=o),e.lastX=o.clientX,e.lastY=o.clientY}),e.options.tint&&"inner"!=e.options.zoomType&&e.zoomTint.bind("mousemove",function(o){e.lastX===o.clientX&&e.lastY===o.clientY||(e.setPosition(o),e.currentLoc=o),e.lastX=o.clientX,e.lastY=o.clientY}),"inner"==e.options.zoomType&&e.zoomWindow.bind("mousemove",function(o){e.lastX===o.clientX&&e.lastY===o.clientY||(e.setPosition(o),e.currentLoc=o),e.lastX=o.clientX,e.lastY=o.clientY}),e.zoomContainer.add(e.$elem).mouseenter(function(){0==e.overWindow&&e.setElements("show")}).mouseleave(function(){e.scrollLock||e.setElements("hide")}),"inner"!=e.options.zoomType&&e.zoomWindow.mouseenter(function(){e.overWindow=!0,e.setElements("hide")}).mouseleave(function(){e.overWindow=!1}),e.options.zoomLevel,e.options.minZoomLevel?e.minZoomLevel=e.options.minZoomLevel:e.minZoomLevel=2*e.options.scrollZoomIncrement,e.options.scrollZoom&&e.zoomContainer.add(e.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(t){e.scrollLock=!0,clearTimeout(o.data(this,"timer")),o.data(this,"timer",setTimeout(function(){e.scrollLock=!1},250));var i=t.originalEvent.wheelDelta||-1*t.originalEvent.detail;return t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),i/120>0?e.currentZoomLevel>=e.minZoomLevel&&e.changeZoomLevel(e.currentZoomLevel-e.options.scrollZoomIncrement):e.options.maxZoomLevel?e.currentZoomLevel<=e.options.maxZoomLevel&&e.changeZoomLevel(parseFloat(e.currentZoomLevel)+e.options.scrollZoomIncrement):e.changeZoomLevel(parseFloat(e.currentZoomLevel)+e.options.scrollZoomIncrement),!1}))},setElements:function(o){if(!this.options.zoomEnabled)return!1;"show"==o&&this.isWindowSet&&("inner"==this.options.zoomType&&this.showHideWindow("show"),"window"==this.options.zoomType&&this.showHideWindow("show"),this.options.showLens&&this.showHideLens("show"),this.options.tint&&"inner"!=this.options.zoomType&&this.showHideTint("show")),"hide"==o&&("window"==this.options.zoomType&&this.showHideWindow("hide"),this.options.tint||this.showHideWindow("hide"),this.options.showLens&&this.showHideLens("hide"),this.options.tint&&this.showHideTint("hide"))},setPosition:function(o){if(!this.options.zoomEnabled)return!1;this.nzHeight=this.$elem.height(),this.nzWidth=this.$elem.width(),this.nzOffset=this.$elem.offset(),this.ctOffset=this.$container.offset(),this.options.tint&&"inner"!=this.options.zoomType&&(this.zoomTint.css({top:0}),this.zoomTint.css({left:0})),this.options.responsive&&!this.options.scrollZoom&&this.options.showLens&&(this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?lensHeight=this.nzHeight:lensHeight=String(this.options.zoomWindowHeight/this.heightRatio),this.largeWidth<this.options.zoomWindowWidth?lensWidth=this.nzWidth:lensWidth=this.options.zoomWindowWidth/this.widthRatio,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"lens"!=this.options.zoomType&&(this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?lensHeight=this.nzHeight:lensHeight=String(this.options.zoomWindowHeight/this.heightRatio),this.options.zoomWindowWidth<this.options.zoomWindowWidth?lensWidth=this.nzWidth:lensWidth=this.options.zoomWindowWidth/this.widthRatio,this.zoomLens.css("width",lensWidth),this.zoomLens.css("height",lensHeight),this.options.tint&&(this.zoomTintImage.css("width",this.nzWidth),this.zoomTintImage.css("height",this.nzHeight))),"lens"==this.options.zoomType&&this.zoomLens.css({width:String(this.options.lensSize)+"px",height:String(this.options.lensSize)+"px"})),this.zoomContainer.css({top:this.nzOffset.top-this.ctOffset.top}),this.zoomContainer.css({left:this.nzOffset.left-this.ctOffset.left}),this.mouseLeft=parseInt(o.pageX-this.nzOffset.left),this.mouseTop=parseInt(o.pageY-this.nzOffset.top),"window"==this.options.zoomType&&(this.Etoppos=this.mouseTop<this.zoomLens.height()/2,this.Eboppos=this.mouseTop>this.nzHeight-this.zoomLens.height()/2-2*this.options.lensBorderSize,this.Eloppos=this.mouseLeft<0+this.zoomLens.width()/2,this.Eroppos=this.mouseLeft>this.nzWidth-this.zoomLens.width()/2-2*this.options.lensBorderSize),"inner"==this.options.zoomType&&(this.Etoppos=this.mouseTop<this.nzHeight/2/this.heightRatio,this.Eboppos=this.mouseTop>this.nzHeight-this.nzHeight/2/this.heightRatio,this.Eloppos=this.mouseLeft<0+this.nzWidth/2/this.widthRatio,this.Eroppos=this.mouseLeft>this.nzWidth-this.nzWidth/2/this.widthRatio-2*this.options.lensBorderSize),this.mouseLeft<=0||this.mouseTop<0||this.mouseLeft>this.nzWidth||this.mouseTop>this.nzHeight?this.setElements("hide"):(this.options.showLens&&(this.lensLeftPos=String(this.mouseLeft-this.zoomLens.width()/2),this.lensTopPos=String(this.mouseTop-this.zoomLens.height()/2)),this.Etoppos&&(this.lensTopPos=0),this.Eloppos&&(this.windowLeftPos=0,this.lensLeftPos=0,this.tintpos=0),"window"==this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize)),"inner"==this.options.zoomType&&(this.Eboppos&&(this.lensTopPos=Math.max(this.nzHeight-2*this.options.lensBorderSize,0)),this.Eroppos&&(this.lensLeftPos=this.nzWidth-this.nzWidth-2*this.options.lensBorderSize)),"lens"==this.options.zoomType&&(this.windowLeftPos=String(-1*((o.pageX-this.nzOffset.left)*this.widthRatio-this.zoomLens.width()/2)),this.windowTopPos=String(-1*((o.pageY-this.nzOffset.top)*this.heightRatio-this.zoomLens.height()/2)),this.zoomLens.css({backgroundPosition:this.windowLeftPos+"px "+this.windowTopPos+"px"}),this.changeBgSize&&(this.nzHeight>this.nzWidth?("lens"==this.options.zoomType&&this.zoomLens.css({"background-size":this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"}),this.zoomWindow.css({"background-size":this.largeWidth/this.newvalueheight+"px "+this.largeHeight/this.newvalueheight+"px"})):("lens"==this.options.zoomType&&this.zoomLens.css({"background-size":this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"}),this.zoomWindow.css({"background-size":this.largeWidth/this.newvaluewidth+"px "+this.largeHeight/this.newvaluewidth+"px"})),this.changeBgSize=!1),this.setWindowPostition(o)),this.options.tint&&"inner"!=this.options.zoomType&&this.setTintPosition(o),"window"==this.options.zoomType&&this.setWindowPostition(o),"inner"==this.options.zoomType&&this.setWindowPostition(o),this.options.showLens&&(this.fullwidth&&"lens"!=this.options.zoomType&&(this.lensLeftPos=0),this.zoomLens.css({left:this.lensLeftPos+"px",top:this.lensTopPos+"px"})))},showHideWindow:function(o){"show"==o&&(this.isWindowActive||(this.options.zoomWindowFadeIn?this.zoomWindow.stop(!0,!0,!1).fadeIn(this.options.zoomWindowFadeIn):this.zoomWindow.show(),this.isWindowActive=!0)),"hide"==o&&this.isWindowActive&&(this.options.zoomWindowFadeOut?this.zoomWindow.stop(!0,!0).fadeOut(this.options.zoomWindowFadeOut):this.zoomWindow.hide(),this.isWindowActive=!1)},showHideLens:function(o){"show"==o&&(this.isLensActive||(this.options.lensFadeIn?this.zoomLens.stop(!0,!0,!1).fadeIn(this.options.lensFadeIn):this.zoomLens.show(),this.isLensActive=!0)),"hide"==o&&this.isLensActive&&(this.options.lensFadeOut?this.zoomLens.stop(!0,!0).fadeOut(this.options.lensFadeOut):this.zoomLens.hide(),this.isLensActive=!1)},showHideTint:function(o){"show"==o&&(this.isTintActive||(this.options.zoomTintFadeIn?this.zoomTint.css({opacity:this.options.tintOpacity}).animate().stop(!0,!0).fadeIn("slow"):(this.zoomTint.css({opacity:this.options.tintOpacity}).animate(),this.zoomTint.show()),this.isTintActive=!0)),"hide"==o&&this.isTintActive&&(this.options.zoomTintFadeOut?this.zoomTint.stop(!0,!0).fadeOut(this.options.zoomTintFadeOut):this.zoomTint.hide(),this.isTintActive=!1)},setLensPostition:function(o){},setWindowPostition:function(e){var t=this;if(isNaN(t.options.zoomWindowPosition))t.externalContainer=o("#"+t.options.zoomWindowPosition),t.externalContainerWidth=t.externalContainer.width(),t.externalContainerHeight=t.externalContainer.height(),t.externalContainerOffset=t.externalContainer.offset(),t.windowOffsetTop=t.externalContainerOffset.top,t.windowOffsetLeft=t.externalContainerOffset.left;else switch(t.options.zoomWindowPosition){case 1:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=+t.nzWidth;break;case 2:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=t.nzWidth);break;case 3:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=t.nzWidth;break;case 4:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth;break;case 5:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 6:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 7:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=0;break;case 8:t.windowOffsetTop=t.nzHeight,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 9:t.windowOffsetTop=t.nzHeight-t.zoomWindow.height()-2*t.options.borderSize,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 10:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.options.zoomWindowHeight/2-t.nzHeight/2),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize));break;case 11:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 12:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.zoomWindow.width()+2*t.options.borderSize);break;case 13:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=0;break;case 14:t.options.zoomWindowHeight>t.nzHeight&&(t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=-1*(t.options.zoomWindowWidth/2-t.nzWidth/2+2*t.options.borderSize));break;case 15:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth-t.zoomWindow.width()-2*t.options.borderSize;break;case 16:t.windowOffsetTop=-1*(t.zoomWindow.height()+2*t.options.borderSize),t.windowOffsetLeft=t.nzWidth;break;default:t.windowOffsetTop=t.options.zoomWindowOffety,t.windowOffsetLeft=t.nzWidth}t.isWindowSet=!0,t.windowOffsetTop=t.windowOffsetTop+t.options.zoomWindowOffety,t.windowOffsetLeft=t.windowOffsetLeft+t.options.zoomWindowOffetx,t.zoomWindow.css({top:t.windowOffsetTop}),t.zoomWindow.css({left:t.windowOffsetLeft}),"inner"==t.options.zoomType&&(t.zoomWindow.css({top:0}),t.zoomWindow.css({left:0})),t.windowLeftPos=String(-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2)),t.windowTopPos=String(-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2)),t.Etoppos&&(t.windowTopPos=0),t.Eloppos&&(t.windowLeftPos=0),t.Eboppos&&(t.windowTopPos=-1*(t.largeHeight/t.currentZoomLevel-t.zoomWindow.height())),t.Eroppos&&(t.windowLeftPos=-1*(t.largeWidth/t.currentZoomLevel-t.zoomWindow.width())),t.fullheight&&(t.windowTopPos=0),t.fullwidth&&(t.windowLeftPos=0),"window"!=t.options.zoomType&&"inner"!=t.options.zoomType||(1==t.zoomLock&&(t.widthRatio<=1&&(t.windowLeftPos=0),t.heightRatio<=1&&(t.windowTopPos=0)),t.largeHeight<t.options.zoomWindowHeight&&(t.windowTopPos=0),t.largeWidth<t.options.zoomWindowWidth&&(t.windowLeftPos=0),t.options.easing?(t.xp||(t.xp=0),t.yp||(t.yp=0),t.loop||(t.loop=setInterval(function(){t.xp+=(t.windowLeftPos-t.xp)/t.options.easingAmount,t.yp+=(t.windowTopPos-t.yp)/t.options.easingAmount,t.scrollingLock?(clearInterval(t.loop),t.xp=t.windowLeftPos,t.yp=t.windowTopPos,t.xp=-1*((e.pageX-t.nzOffset.left)*t.widthRatio-t.zoomWindow.width()/2),t.yp=-1*((e.pageY-t.nzOffset.top)*t.heightRatio-t.zoomWindow.height()/2),t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"}),t.scrollingLock=!1,t.loop=!1):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"!=t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.xp+"px "+t.yp+"px"}))},16))):(t.changeBgSize&&(t.nzHeight>t.nzWidth?("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"}),t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})):("lens"==t.options.zoomType&&t.zoomLens.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}),t.largeHeight/t.newvaluewidth<t.options.zoomWindowHeight?t.zoomWindow.css({"background-size":t.largeWidth/t.newvaluewidth+"px "+t.largeHeight/t.newvaluewidth+"px"}):t.zoomWindow.css({"background-size":t.largeWidth/t.newvalueheight+"px "+t.largeHeight/t.newvalueheight+"px"})),t.changeBgSize=!1),t.zoomWindow.css({backgroundPosition:t.windowLeftPos+"px "+t.windowTopPos+"px"})))},setTintPosition:function(o){this.nzOffset=this.$elem.offset(),this.tintpos=String(-1*(o.pageX-this.nzOffset.left-this.zoomLens.width()/2)),this.tintposy=String(-1*(o.pageY-this.nzOffset.top-this.zoomLens.height()/2)),this.Etoppos&&(this.tintposy=0),this.Eloppos&&(this.tintpos=0),this.Eboppos&&(this.tintposy=-1*(this.nzHeight-this.zoomLens.height()-2*this.options.lensBorderSize)),this.Eroppos&&(this.tintpos=-1*(this.nzWidth-this.zoomLens.width()-2*this.options.lensBorderSize)),this.options.tint&&(this.fullheight&&(this.tintposy=0),this.fullwidth&&(this.tintpos=0),this.zoomTintImage.css({left:this.tintpos+"px"}),this.zoomTintImage.css({top:this.tintposy+"px"}))},swaptheimage:function(e,t){var i=this,n=new Image;i.options.loadingIcon&&(i.spinner=o("<div style=\"background: url('"+i.options.loadingIcon+"') no-repeat center;height:"+i.nzHeight+"px;width:"+i.nzWidth+'px;z-index: 2000;position: absolute; background-position: center center;"></div>'),i.$elem.after(i.spinner)),i.options.onImageSwap(i.$elem),n.onload=function(){i.largeWidth=n.width,i.largeHeight=n.height,i.zoomImage=t,void 0!==i.zoomWindow&&(i.zoomWindow.css({"background-size":i.largeWidth+"px "+i.largeHeight+"px"}),i.zoomWindow.css({"background-size":i.largeWidth+"px "+i.largeHeight+"px"}),i.swapAction(e,t))},n.src=t},swapAction:function(e,t){var i=this,n=new Image;if(n.onload=function(){i.nzHeight=n.height,i.nzWidth=n.width,i.options.onImageSwapComplete(i.$elem),i.doneCallback()},n.src=e,i.currentZoomLevel=i.options.zoomLevel,i.options.maxZoomLevel=!1,"lens"==i.options.zoomType&&i.zoomLens.css({backgroundImage:"url('"+t+"')"}),"window"==i.options.zoomType&&i.zoomWindow.css({backgroundImage:"url('"+t+"')"}),"inner"==i.options.zoomType&&i.zoomWindow.css({backgroundImage:"url('"+t+"')"}),i.currentImage=t,i.options.imageCrossfade){var s=i.$elem,r=s.clone();if(i.$elem.attr("src",e),i.$elem.after(r),r.stop(!0).fadeOut(i.options.imageCrossfade,function(){o(this).remove()}),i.$elem.width("auto").removeAttr("width"),i.$elem.height("auto").removeAttr("height"),s.fadeIn(i.options.imageCrossfade),i.options.tint&&"inner"!=i.options.zoomType){var a=i.zoomTintImage,l=a.clone();i.zoomTintImage.attr("src",t),i.zoomTintImage.after(l),l.stop(!0).fadeOut(i.options.imageCrossfade,function(){o(this).remove()}),a.fadeIn(i.options.imageCrossfade),i.zoomTint.css({height:i.$elem.height()}),i.zoomTint.css({width:i.$elem.width()})}i.zoomContainer.css("height",i.$elem.height()),i.zoomContainer.css("width",i.$elem.width()),"inner"==i.options.zoomType&&(i.options.constrainType||(i.zoomWrap.parent().css("height",i.$elem.height()),i.zoomWrap.parent().css("width",i.$elem.width()),i.zoomWindow.css("height",i.$elem.height()),i.zoomWindow.css("width",i.$elem.width()))),i.options.imageCrossfade&&(i.zoomWrap.css("height",i.$elem.height()),i.zoomWrap.css("width",i.$elem.width()))}else i.$elem.attr("src",e),i.options.tint&&(i.zoomTintImage.attr("src",t),i.zoomTintImage.attr("height",i.$elem.height()),i.zoomTintImage.css({height:i.$elem.height()}),i.zoomTint.css({height:i.$elem.height()})),i.zoomContainer.css("height",i.$elem.height()),i.zoomContainer.css("width",i.$elem.width()),i.options.imageCrossfade&&(i.zoomWrap.css("height",i.$elem.height()),i.zoomWrap.css("width",i.$elem.width()));i.options.constrainType&&("height"==i.options.constrainType&&(i.zoomContainer.css("height",i.options.constrainSize),i.zoomContainer.css("width","auto"),i.options.imageCrossfade?(i.zoomWrap.css("height",i.options.constrainSize),i.zoomWrap.css("width","auto"),i.constwidth=i.zoomWrap.width()):(i.$elem.css("height",i.options.constrainSize),i.$elem.css("width","auto"),i.constwidth=i.$elem.width()),"inner"==i.options.zoomType&&(i.zoomWrap.parent().css("height",i.options.constrainSize),i.zoomWrap.parent().css("width",i.constwidth),i.zoomWindow.css("height",i.options.constrainSize),i.zoomWindow.css("width",i.constwidth)),i.options.tint&&(i.tintContainer.css("height",i.options.constrainSize),i.tintContainer.css("width",i.constwidth),i.zoomTint.css("height",i.options.constrainSize),i.zoomTint.css("width",i.constwidth),i.zoomTintImage.css("height",i.options.constrainSize),i.zoomTintImage.css("width",i.constwidth))),"width"==i.options.constrainType&&(i.zoomContainer.css("height","auto"),i.zoomContainer.css("width",i.options.constrainSize),i.options.imageCrossfade?(i.zoomWrap.css("height","auto"),i.zoomWrap.css("width",i.options.constrainSize),i.constheight=i.zoomWrap.height()):(i.$elem.css("height","auto"),i.$elem.css("width",i.options.constrainSize),i.constheight=i.$elem.height()),"inner"==i.options.zoomType&&(i.zoomWrap.parent().css("height",i.constheight),i.zoomWrap.parent().css("width",i.options.constrainSize),i.zoomWindow.css("height",i.constheight),i.zoomWindow.css("width",i.options.constrainSize)),i.options.tint&&(i.tintContainer.css("height",i.constheight),i.tintContainer.css("width",i.options.constrainSize),i.zoomTint.css("height",i.constheight),i.zoomTint.css("width",i.options.constrainSize),i.zoomTintImage.css("height",i.constheight),i.zoomTintImage.css("width",i.options.constrainSize))))},doneCallback:function(){this.options.loadingIcon&&this.spinner.hide(),this.nzOffset=this.$elem.offset(),this.nzWidth=this.$elem.width(),this.nzHeight=this.$elem.height(),this.currentZoomLevel=this.options.zoomLevel,this.widthRatio=this.largeWidth/this.nzWidth,this.heightRatio=this.largeHeight/this.nzHeight,"window"==this.options.zoomType&&(this.nzHeight<this.options.zoomWindowWidth/this.widthRatio?lensHeight=this.nzHeight:lensHeight=String(this.options.zoomWindowHeight/this.heightRatio),this.options.zoomWindowWidth<this.options.zoomWindowWidth?lensWidth=this.nzWidth:lensWidth=this.options.zoomWindowWidth/this.widthRatio,this.zoomLens&&(this.zoomLens.css("width",lensWidth),this.zoomLens.css("height",lensHeight)))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var e=this;return e.gallerylist=[],e.options.gallery?o("#"+e.options.gallery+" a").each(function(){var t="";o(this).data("zoom-image")?t=o(this).data("zoom-image"):o(this).data("image")&&(t=o(this).data("image")),t==e.zoomImage?e.gallerylist.unshift({href:""+t,title:o(this).find("img").attr("title")}):e.gallerylist.push({href:""+t,title:o(this).find("img").attr("title")})}):e.gallerylist.push({href:""+e.zoomImage,title:o(this).find("img").attr("title")}),e.gallerylist},changeZoomLevel:function(o){this.scrollingLock=!0,this.newvalue=parseFloat(o).toFixed(2),newvalue=parseFloat(o).toFixed(2),maxheightnewvalue=this.largeHeight/(this.options.zoomWindowHeight/this.nzHeight*this.nzHeight),maxwidthtnewvalue=this.largeWidth/(this.options.zoomWindowWidth/this.nzWidth*this.nzWidth),"inner"!=this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/maxheightnewvalue/this.nzHeight,this.newvalueheight=maxheightnewvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,this.newvalueheight=newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/maxwidthtnewvalue/this.nzWidth,this.newvaluewidth=maxwidthtnewvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1),"lens"==this.options.zoomType&&(maxheightnewvalue<=newvalue?(this.fullwidth=!0,this.newvaluewidth=maxheightnewvalue):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1))),"inner"==this.options.zoomType&&(maxheightnewvalue=parseFloat(this.largeHeight/this.nzHeight).toFixed(2),maxwidthtnewvalue=parseFloat(this.largeWidth/this.nzWidth).toFixed(2),newvalue>maxheightnewvalue&&(newvalue=maxheightnewvalue),newvalue>maxwidthtnewvalue&&(newvalue=maxwidthtnewvalue),maxheightnewvalue<=newvalue?(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,newvalue>maxheightnewvalue?this.newvalueheight=maxheightnewvalue:this.newvalueheight=newvalue,this.fullheight=!0):(this.heightRatio=this.largeHeight/newvalue/this.nzHeight,newvalue>maxheightnewvalue?this.newvalueheight=maxheightnewvalue:this.newvalueheight=newvalue,this.fullheight=!1),maxwidthtnewvalue<=newvalue?(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,newvalue>maxwidthtnewvalue?this.newvaluewidth=maxwidthtnewvalue:this.newvaluewidth=newvalue,this.fullwidth=!0):(this.widthRatio=this.largeWidth/newvalue/this.nzWidth,this.newvaluewidth=newvalue,this.fullwidth=!1)),scrcontinue=!1,"inner"==this.options.zoomType&&(this.nzWidth>this.nzHeight&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullheight=!0,this.fullwidth=!0)),this.nzHeight>this.nzWidth&&(this.newvaluewidth<=maxwidthtnewvalue?scrcontinue=!0:(scrcontinue=!1,this.fullheight=!0,this.fullwidth=!0))),"inner"!=this.options.zoomType&&(scrcontinue=!0),scrcontinue&&(this.zoomLock=0,this.changeZoom=!0,this.options.zoomWindowHeight/this.heightRatio<=this.nzHeight&&(this.currentZoomLevel=this.newvalueheight,"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({height:String(this.options.zoomWindowHeight/this.heightRatio)+"px"})),"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType||(this.changeBgSize=!0)),this.options.zoomWindowWidth/this.widthRatio<=this.nzWidth&&("inner"!=this.options.zoomType&&this.newvaluewidth>this.newvalueheight&&(this.currentZoomLevel=this.newvaluewidth),"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType&&(this.changeBgSize=!0,this.zoomLens.css({width:String(this.options.zoomWindowWidth/this.widthRatio)+"px"})),"lens"!=this.options.zoomType&&"inner"!=this.options.zoomType||(this.changeBgSize=!0)),"inner"==this.options.zoomType&&(this.changeBgSize=!0,this.nzWidth>this.nzHeight&&(this.currentZoomLevel=this.newvaluewidth),this.nzHeight>this.nzWidth&&(this.currentZoomLevel=this.newvaluewidth))),this.setPosition(this.currentLoc)},closeAll:function(){self.zoomWindow&&self.zoomWindow.hide(),self.zoomLens&&self.zoomLens.hide(),self.zoomTint&&self.zoomTint.hide()},changeState:function(o){"enable"==o&&(this.options.zoomEnabled=!0),"disable"==o&&(this.options.zoomEnabled=!1)}};o.fn.elevateZoom=function(e){return this.each(function(){var t=Object.create(n);t.init(e,this),o.data(this,"elevateZoom",t)})},o.fn.elevateZoom.options={zoomActivation:"hover",zoomEnabled:!0,preloading:1,zoomLevel:1,scrollZoom:!1,scrollZoomIncrement:.1,minZoomLevel:!1,maxZoomLevel:!1,easing:!1,easingAmount:12,lensSize:200,zoomWindowWidth:400,zoomWindowHeight:400,zoomWindowOffetx:0,zoomWindowOffety:0,zoomWindowPosition:1,zoomWindowBgColour:"#fff",lensFadeIn:!1,lensFadeOut:!1,debug:!1,zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowAlwaysShow:!1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,borderSize:4,showLens:!0,borderColour:"#888",lensBorderSize:1,lensBorderColour:"#000",lensShape:"square",zoomType:"window",containLensZoom:!1,lensColour:"white",lensOpacity:.4,lenszoom:!1,tint:!1,tintColour:"#333",tintOpacity:.4,gallery:!1,galleryActiveClass:"zoomGalleryActive",imageCrossfade:!1,constrainType:!1,constrainSize:!1,loadingIcon:!1,cursor:"default",responsive:!0,onComplete:o.noop,onZoomedImageLoaded:function(){},onImageSwap:o.noop,onImageSwapComplete:o.noop,zoomContainer:"body"}}(jQuery,window,document),function(o,e,t,i){"use strict";var n=t("html"),s=t(o),r=t(e),a=t.fancybox=function(){a.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),h=null,d=void 0!==e.createTouch,c=function(o){return o&&o.hasOwnProperty&&o instanceof t},p=function(o){return o&&"string"===t.type(o)},g=function(o){return p(o)&&o.indexOf("%")>0},m=function(o){return o&&!(o.style.overflow&&"hidden"===o.style.overflow)&&(o.clientWidth&&o.scrollWidth>o.clientWidth||o.clientHeight&&o.scrollHeight>o.clientHeight)},f=function(o,e){var t=parseInt(o,10)||0;return e&&g(o)&&(t=a.getViewport()[e]/100*t),Math.ceil(t)},u=function(o,e){return f(o,e)+"px"};t.extend(a,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>',loading:'<div id="fancybox-loading"><div></div></div>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:t.noop,beforeLoad:t.noop,afterLoad:t.noop,beforeShow:t.noop,afterShow:t.noop,beforeChange:t.noop,beforeClose:t.noop,afterClose:t.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(o,e){if(o&&(t.isPlainObject(e)||(e={}),!1!==a.close(!0)))return t.isArray(o)||(o=c(o)?t(o).get():[o]),t.each(o,function(i,n){var s,r,l,h,d,g,m,f={};"object"===t.type(n)&&(n.nodeType&&(n=t(n)),c(n)?(f={href:n.data("fancybox-href")||n.attr("href"),title:t("<div/>").text(n.data("fancybox-title")||n.attr("title")||"").html(),isDom:!0,element:n},t.metadata&&t.extend(!0,f,n.metadata())):f=n),s=e.href||f.href||(p(n)?n:null),r=void 0!==e.title?e.title:f.title||"",!(h=(l=e.content||f.content)?"html":e.type||f.type)&&f.isDom&&((h=n.data("fancybox-type"))||(h=(d=n.prop("class").match(/fancybox\.(\w+)/))?d[1]:null)),p(s)&&(h||(a.isImage(s)?h="image":a.isSWF(s)?h="swf":"#"===s.charAt(0)?h="inline":p(n)&&(h="html",l=n)),"ajax"===h&&(s=(g=s.split(/\s+/,2)).shift(),m=g.shift())),l||("inline"===h?s?l=t(p(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):f.isDom&&(l=n):"html"===h?l=s:h||s||!f.isDom||(h="inline",l=n)),t.extend(f,{href:s,type:h,content:l,title:r,selector:m}),o[i]=f}),a.opts=t.extend(!0,{},a.defaults,e),void 0!==e.keys&&(a.opts.keys=!!e.keys&&t.extend({},a.defaults.keys,e.keys)),a.group=o,a._start(a.opts.index)},cancel:function(){var o=a.coming;o&&!1===a.trigger("onCancel")||(a.hideLoading(),o&&(a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onerror=null),o.wrap&&o.wrap.stop(!0,!0).trigger("onReset").remove(),a.coming=null,a.current||a._afterZoomOut(o)))},close:function(o){a.cancel(),!1!==a.trigger("beforeClose")&&(a.unbindEvents(),a.isActive&&(a.isOpen&&!0!==o?(a.isOpen=a.isOpened=!1,a.isClosing=!0,t(".fancybox-item, .fancybox-nav").remove(),a.wrap.stop(!0,!0).removeClass("fancybox-opened"),a.transitions[a.current.closeMethod]()):(t(".fancybox-wrap").stop(!0).trigger("onReset").remove(),a._afterZoomOut())))},play:function(o){var e=function(){clearTimeout(a.player.timer)},t=function(){e(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},i=function(){e(),r.unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")};!0===o||!a.player.isActive&&!1!==o?a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":t,"beforeLoad.player":e}),t(),a.trigger("onPlayStart")):i()},next:function(o){var e=a.current;e&&(p(o)||(o=e.direction.next),a.jumpto(e.index+1,o,"next"))},prev:function(o){var e=a.current;e&&(p(o)||(o=e.direction.prev),a.jumpto(e.index-1,o,"prev"))},jumpto:function(o,e,t){var i=a.current;i&&(o=f(o),a.direction=e||i.direction[o>=i.index?"next":"prev"],a.router=t||"jumpto",i.loop&&(o<0&&(o=i.group.length+o%i.group.length),o%=i.group.length),void 0!==i.group[o]&&(a.cancel(),a._start(o)))},reposition:function(o,e){var i,n=a.current,s=n?n.wrap:null;s&&(i=a._getPosition(e),o&&"scroll"===o.type?(delete i.position,s.stop(!0,!0).animate(i,200)):(s.css(i),n.pos=t.extend({},n.dim,i)))},update:function(o){var e=o&&o.originalEvent&&o.originalEvent.type,t=!e||"orientationchange"===e;t&&(clearTimeout(h),h=null),a.isOpen&&!h&&(h=setTimeout(function(){var i=a.current;i&&!a.isClosing&&(a.wrap.removeClass("fancybox-tmp"),(t||"load"===e||"resize"===e&&i.autoResize)&&a._setDimension(),"scroll"===e&&i.canShrink||a.reposition(o),a.trigger("onUpdate"),h=null)},t&&!d?0:300))},toggle:function(o){a.isOpen&&(a.current.fitToView="boolean"===t.type(o)?o:!a.current.fitToView,d&&(a.wrap.removeAttr("style").addClass("fancybox-tmp"),a.trigger("onUpdate")),a.update())},hideLoading:function(){r.unbind(".loading"),t("#fancybox-loading").remove()},showLoading:function(){var o,e;a.hideLoading(),o=t(a.opts.tpl.loading).click(a.cancel).appendTo("body"),r.bind("keydown.loading",function(o){27===(o.which||o.keyCode)&&(o.preventDefault(),a.cancel())}),a.defaults.fixed||(e=a.getViewport(),o.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x})),a.trigger("onLoading")},getViewport:function(){var e=a.current&&a.current.locked||!1,t={x:s.scrollLeft(),y:s.scrollTop()};return e&&e.length?(t.w=e[0].clientWidth,t.h=e[0].clientHeight):(t.w=d&&o.innerWidth?o.innerWidth:s.width(),t.h=d&&o.innerHeight?o.innerHeight:s.height()),t},unbindEvents:function(){a.wrap&&c(a.wrap)&&a.wrap.unbind(".fb"),r.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var o,e=a.current;e&&(s.bind("orientationchange.fb"+(d?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),a.update),(o=e.keys)&&r.bind("keydown.fb",function(i){var n=i.which||i.keyCode,s=i.target||i.srcElement;if(27===n&&a.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||s&&(s.type||t(s).is("[contenteditable]"))||t.each(o,function(o,s){return e.group.length>1&&void 0!==s[n]?(a[o](s[n]),i.preventDefault(),!1):t.inArray(n,s)>-1?(a[o](),i.preventDefault(),!1):void 0})}),t.fn.mousewheel&&e.mouseWheel&&a.wrap.bind("mousewheel.fb",function(o,i,n,s){for(var r=o.target||null,l=t(r),h=!1;l.length&&!(h||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)h=m(l[0]),l=t(l).parent();0===i||h||a.group.length>1&&!e.canShrink&&(s>0||n>0?a.prev(s>0?"down":"left"):(s<0||n<0)&&a.next(s<0?"up":"right"),o.preventDefault())}))},trigger:function(o,e){var i,n=e||a.coming||a.current;if(n){if(t.isFunction(n[o])&&(i=n[o].apply(n,Array.prototype.slice.call(arguments,1))),!1===i)return!1;n.helpers&&t.each(n.helpers,function(e,i){i&&a.helpers[e]&&t.isFunction(a.helpers[e][o])&&a.helpers[e][o](t.extend(!0,{},a.helpers[e].defaults,i),n)})}r.trigger(o)},isImage:function(o){return p(o)&&o.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(o){return p(o)&&o.match(/\.(swf)((\?|#).*)?$/i)},_start:function(o){var e,i,n,s,r,l={};if(o=f(o),!(e=a.group[o]||null))return!1;if(l=t.extend(!0,{},a.opts,e),s=l.margin,r=l.padding,"number"===t.type(s)&&(l.margin=[s,s,s,s]),"number"===t.type(r)&&(l.padding=[r,r,r,r]),l.modal&&t.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=a.group,l.index=o,a.coming=l,!1!==a.trigger("beforeLoad")){if(n=l.type,i=l.href,!n)return a.coming=null,!(!a.current||!a.router||"jumpto"===a.router)&&(a.current.index=o,a[a.router](a.direction));if(a.isActive=!0,"image"!==n&&"swf"!==n||(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===n&&(l.aspectRatio=!0),"iframe"===n&&d&&(l.scrolling="scroll"),l.wrap=t(l.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+n+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),t.extend(l,{skin:t(".fancybox-skin",l.wrap),outer:t(".fancybox-outer",l.wrap),inner:t(".fancybox-inner",l.wrap)}),t.each(["Top","Right","Bottom","Left"],function(o,e){l.skin.css("padding"+e,u(l.padding[o]))}),a.trigger("onReady"),"inline"===n||"html"===n){if(!l.content||!l.content.length)return a._error("content")}else if(!i)return a._error("href");"image"===n?a._loadImage():"ajax"===n?a._loadAjax():"iframe"===n?a._loadIframe():a._afterLoad()}else a.coming=null},_error:function(o){t.extend(a.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:o,content:a.coming.tpl.error}),a._afterLoad()},_loadImage:function(){var o=a.imgPreload=new Image;o.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width/a.opts.pixelRatio,a.coming.height=this.height/a.opts.pixelRatio,a._afterLoad()},o.onerror=function(){this.onload=this.onerror=null,a._error("image")},o.src=a.coming.href,!0!==o.complete&&a.showLoading()},_loadAjax:function(){var o=a.coming;a.showLoading(),a.ajaxLoad=t.ajax(t.extend({},o.ajax,{url:o.href,error:function(o,e){a.coming&&"abort"!==e?a._error("ajax",o):a.hideLoading()},success:function(e,t){"success"===t&&(o.content=e,a._afterLoad())}}))},_loadIframe:function(){var o=a.coming,e=t(o.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":o.iframe.scrolling).attr("src",o.href);t(o.wrap).bind("onReset",function(){try{t(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(o){}}),o.iframe.preload&&(a.showLoading(),e.one("load",function(){t(this).data("ready",1),d||t(this).bind("load.fb",a.update),t(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),a._afterLoad()})),o.content=e.appendTo(o.inner),o.iframe.preload||a._afterLoad()},_preloadImages:function(){var o,e,t=a.group,i=a.current,n=t.length,s=i.preload?Math.min(i.preload,n-1):0;for(e=1;e<=s;e+=1)"image"===(o=t[(i.index+e)%n]).type&&o.href&&((new Image).src=o.href)},_afterLoad:function(){var o,e,i,n,s,r,l=a.coming,h=a.current,d="fancybox-placeholder";if(a.hideLoading(),l&&!1!==a.isActive){if(!1===a.trigger("afterLoad",l,h))return l.wrap.stop(!0).trigger("onReset").remove(),void(a.coming=null);switch(h&&(a.trigger("beforeChange",h),h.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),a.unbindEvents(),o=l,e=l.content,i=l.type,n=l.scrolling,t.extend(a,{wrap:o.wrap,skin:o.skin,outer:o.outer,inner:o.inner,current:o,previous:h}),s=o.href,i){case"inline":case"ajax":case"html":o.selector?e=t("<div>").html(e).find(o.selector):c(e)&&(e.data(d)||e.data(d,t('<div class="'+d+'"></div>').insertAfter(e).hide()),e=e.show().detach(),o.wrap.bind("onReset",function(){t(this).find(e).length&&e.hide().replaceAll(e.data(d)).data(d,!1)}));break;case"image":e=o.tpl.image.replace(/\{href\}/g,s);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>',r="",t.each(o.swf,function(o,t){e+='<param name="'+o+'" value="'+t+'"></param>',r+=" "+o+'="'+t+'"'}),e+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+r+"></embed></object>"}c(e)&&e.parent().is(o.inner)||o.inner.append(e),a.trigger("beforeShow"),o.inner.css("overflow","yes"===n?"scroll":"no"===n?"hidden":n),a._setDimension(),a.reposition(),a.isOpen=!1,a.coming=null,a.bindEvents(),a.isOpened?h.prevMethod&&a.transitions[h.prevMethod]():t(".fancybox-wrap").not(o.wrap).stop(!0).trigger("onReset").remove(),a.transitions[a.isOpened?o.nextMethod:o.openMethod](),a._preloadImages()}},_setDimension:function(){var o,e,i,n,s,r,l,h,d,c,p,m,w,z,v,x=a.getViewport(),y=0,b=!1,W=!1,T=a.wrap,L=a.skin,S=a.inner,H=a.current,k=H.width,C=H.height,O=H.minWidth,I=H.minHeight,P=H.maxWidth,E=H.maxHeight,R=H.scrolling,$=H.scrollOutside?H.scrollbarWidth:0,_=H.margin,A=f(_[1]+_[3]),Z=f(_[0]+_[2]);if(T.add(L).add(S).width("auto").height("auto").removeClass("fancybox-tmp"),o=f(L.outerWidth(!0)-L.width()),e=f(L.outerHeight(!0)-L.height()),i=A+o,n=Z+e,s=g(k)?(x.w-i)*f(k)/100:k,r=g(C)?(x.h-n)*f(C)/100:C,"iframe"===H.type){if(z=H.content,H.autoHeight&&z&&1===z.data("ready"))try{z[0].contentWindow.document.location&&(S.width(s).height(9999),v=z.contents().find("body"),$&&v.css("overflow-x","hidden"),r=v.outerHeight(!0))}catch(o){}}else(H.autoWidth||H.autoHeight)&&(S.addClass("fancybox-tmp"),H.autoWidth||S.width(s),H.autoHeight||S.height(r),H.autoWidth&&(s=S.width()),H.autoHeight&&(r=S.height()),S.removeClass("fancybox-tmp"));if(k=f(s),C=f(r),d=s/r,O=f(g(O)?f(O,"w")-i:O),P=f(g(P)?f(P,"w")-i:P),I=f(g(I)?f(I,"h")-n:I),E=f(g(E)?f(E,"h")-n:E),l=P,h=E,H.fitToView&&(P=Math.min(x.w-i,P),E=Math.min(x.h-n,E)),m=x.w-A,w=x.h-Z,H.aspectRatio?(k>P&&(C=f((k=P)/d)),C>E&&(k=f((C=E)*d)),k<O&&(C=f((k=O)/d)),C<I&&(k=f((C=I)*d))):(k=Math.max(O,Math.min(k,P)),H.autoHeight&&"iframe"!==H.type&&(S.width(k),C=S.height()),C=Math.max(I,Math.min(C,E))),H.fitToView)if(S.width(k).height(C),T.width(k+o),c=T.width(),p=T.height(),H.aspectRatio)for(;(c>m||p>w)&&k>O&&C>I&&!(y++>19);)C=Math.max(I,Math.min(E,C-10)),(k=f(C*d))<O&&(C=f((k=O)/d)),k>P&&(C=f((k=P)/d)),S.width(k).height(C),T.width(k+o),c=T.width(),p=T.height();else k=Math.max(O,Math.min(k,k-(c-m))),C=Math.max(I,Math.min(C,C-(p-w)));$&&"auto"===R&&C<r&&k+o+$<m&&(k+=$),S.width(k).height(C),T.width(k+o),c=T.width(),p=T.height(),b=(c>m||p>w)&&k>O&&C>I,W=H.aspectRatio?k<l&&C<h&&k<s&&C<r:(k<l||C<h)&&(k<s||C<r),t.extend(H,{dim:{width:u(c),height:u(p)},origWidth:s,origHeight:r,canShrink:b,canExpand:W,wPadding:o,hPadding:e,wrapSpace:p-L.outerHeight(!0),skinSpace:L.height()-C}),!z&&H.autoHeight&&C>I&&C<E&&!W&&S.height("auto")},_getPosition:function(o){var e=a.current,t=a.getViewport(),i=e.margin,n=a.wrap.width()+i[1]+i[3],s=a.wrap.height()+i[0]+i[2],r={position:"absolute",top:i[0],left:i[3]};return e.autoCenter&&e.fixed&&!o&&s<=t.h&&n<=t.w?r.position="fixed":e.locked||(r.top+=t.y,r.left+=t.x),r.top=u(Math.max(r.top,r.top+(t.h-s)*e.topRatio)),r.left=u(Math.max(r.left,r.left+(t.w-n)*e.leftRatio)),r},_afterZoomIn:function(){var o=a.current;o&&(a.isOpen=a.isOpened=!0,a.wrap.css("overflow","visible").addClass("fancybox-opened").hide().show(0),a.update(),(o.closeClick||o.nextClick&&a.group.length>1)&&a.inner.css("cursor","pointer").bind("click.fb",function(e){t(e.target).is("a")||t(e.target).parent().is("a")||(e.preventDefault(),a[o.closeClick?"close":"next"]())}),o.closeBtn&&t(o.tpl.closeBtn).appendTo(a.skin).bind("click.fb",function(o){o.preventDefault(),a.close()}),o.arrows&&a.group.length>1&&((o.loop||o.index>0)&&t(o.tpl.prev).appendTo(a.outer).bind("click.fb",a.prev),(o.loop||o.index<a.group.length-1)&&t(o.tpl.next).appendTo(a.outer).bind("click.fb",a.next)),a.trigger("afterShow"),o.loop||o.index!==o.group.length-1?a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play(!0)):a.play(!1))},_afterZoomOut:function(o){o=o||a.current,t(".fancybox-wrap").trigger("onReset").remove(),t.extend(a,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),a.trigger("afterClose",o)}}),a.transitions={getOrigPosition:function(){var o=a.current,e=o.element,t=o.orig,i={},n=50,s=50,r=o.hPadding,l=o.wPadding,h=a.getViewport();return!t&&o.isDom&&e.is(":visible")&&((t=e.find("img:first")).length||(t=e)),c(t)?(i=t.offset(),t.is("img")&&(n=t.outerWidth(),s=t.outerHeight())):(i.top=h.y+(h.h-s)*o.topRatio,i.left=h.x+(h.w-n)*o.leftRatio),("fixed"===a.wrap.css("position")||o.locked)&&(i.top-=h.y,i.left-=h.x),i={top:u(i.top-r*o.topRatio),left:u(i.left-l*o.leftRatio),width:u(n+l),height:u(s+r)}},step:function(o,e){var t,i,n=e.prop,s=a.current,r=s.wrapSpace,l=s.skinSpace;"width"!==n&&"height"!==n||(t=e.end===e.start?1:(o-e.start)/(e.end-e.start),a.isClosing&&(t=1-t),i=o-("width"===n?s.wPadding:s.hPadding),a.skin[n](f("width"===n?i:i-r*t)),a.inner[n](f("width"===n?i:i-r*t-l*t)))},zoomIn:function(){var o=a.current,e=o.pos,i=o.openEffect,n="elastic"===i,s=t.extend({opacity:1},e);delete s.position,n?(e=this.getOrigPosition(),o.openOpacity&&(e.opacity=.1)):"fade"===i&&(e.opacity=.1),a.wrap.css(e).animate(s,{duration:"none"===i?0:o.openSpeed,easing:o.openEasing,step:n?this.step:null,complete:a._afterZoomIn})},zoomOut:function(){var o=a.current,e=o.closeEffect,t="elastic"===e,i={opacity:.1};t&&(i=this.getOrigPosition(),o.closeOpacity&&(i.opacity=.1)),a.wrap.animate(i,{duration:"none"===e?0:o.closeSpeed,easing:o.closeEasing,step:t?this.step:null,complete:a._afterZoomOut})},changeIn:function(){var o,e=a.current,t=e.nextEffect,i=e.pos,n={opacity:1},s=a.direction;i.opacity=.1,"elastic"===t&&(o="down"===s||"up"===s?"top":"left","down"===s||"right"===s?(i[o]=u(f(i[o])-200),n[o]="+=200px"):(i[o]=u(f(i[o])+200),n[o]="-=200px")),"none"===t?a._afterZoomIn():a.wrap.css(i).animate(n,{duration:e.nextSpeed,easing:e.nextEasing,complete:a._afterZoomIn})},changeOut:function(){var o=a.previous,e=o.prevEffect,i={opacity:.1},n=a.direction;"elastic"===e&&(i["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"=200px"),o.wrap.animate(i,{duration:"none"===e?0:o.prevSpeed,easing:o.prevEasing,complete:function(){t(this).trigger("onReset").remove()}})}},a.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:t("html"),create:function(o){var e;o=t.extend({},this.defaults,o),this.overlay&&this.close(),e=a.coming?a.coming.parent:o.parent,this.overlay=t('<div class="fancybox-overlay"></div>').appendTo(e&&e.length?e:"body"),this.fixed=!1,o.fixed&&a.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(o){var e=this;o=t.extend({},this.defaults,o),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(o),this.fixed||(s.bind("resize.overlay",t.proxy(this.update,this)),this.update()),o.closeClick&&this.overlay.bind("click.overlay",function(o){if(t(o.target).hasClass("fancybox-overlay"))return a.isActive?a.close():e.close(),!1}),this.overlay.css(o.css).show()},close:function(){s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(t(".fancybox-margin").removeClass("fancybox-margin"),this.el.removeClass("fancybox-lock"),s.scrollTop(this.scrollV).scrollLeft(this.scrollH)),t(".fancybox-overlay").remove().hide(),t.extend(this,{overlay:null,fixed:!1})},update:function(){var o,t="100%";this.overlay.width(t).height("100%"),l?(o=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),r.width()>o&&(t=r.width())):r.width()>s.width()&&(t=r.width()),this.overlay.width(t).height(r.height())},onReady:function(o,e){var i=this.overlay;t(".fancybox-overlay").stop(!0,!0),i||this.create(o),o.locked&&this.fixed&&e.fixed&&(e.locked=this.overlay.append(e.wrap),e.fixed=!1),!0===o.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(o,e){e.locked&&!this.el.hasClass("fancybox-lock")&&(!1!==this.fixPosition&&t("*:not(object)").filter(function(){return"fixed"===t(this).css("position")&&!t(this).hasClass("fancybox-overlay")&&!t(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin"),this.scrollV=s.scrollTop(),this.scrollH=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(this.scrollV).scrollLeft(this.scrollH)),this.open(o)},onUpdate:function(){this.fixed||this.update()},afterClose:function(o){this.overlay&&!a.coming&&this.overlay.fadeOut(o.speedOut,t.proxy(this.close,this))}},a.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(o){var e,i,n=a.current,s=n.title,r=o.type;if(t.isFunction(s)&&(s=s.call(n.element,n)),p(s)&&""!==t.trim(s)){switch(e=t('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+s+"</div>"),r){case"inside":i=a.skin;break;case"outside":i=a.wrap;break;case"over":i=a.inner;break;default:i=a.skin,e.appendTo("body"),l&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(f(e.css("margin-bottom")))}e["top"===o.position?"prependTo":"appendTo"](i)}}},t.fn.fancybox=function(o){var e,i=t(this),n=this.selector||"",s=function(s){var r,l,h=t(this).blur(),d=e;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||h.is(".fancybox-wrap")||(r=o.groupAttr||"data-fancybox-group",(l=h.attr(r))||(r="rel",l=h.get(0)[r]),l&&""!==l&&"nofollow"!==l&&(d=(h=(h=n.length?t(n):i).filter("["+r+'="'+l+'"]')).index(this)),o.index=d,!1!==a.open(h,o)&&s.preventDefault())};return o=o||{},e=o.index||0,n&&!1!==o.live?r.undelegate(n,"click.fb-start").delegate(n+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):i.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},r.ready(function(){var e,i;void 0===t.scrollbarWidth&&(t.scrollbarWidth=function(){var o=t('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=o.children(),i=e.innerWidth()-e.height(99).innerWidth();return o.remove(),i}),void 0===t.support.fixedPosition&&(t.support.fixedPosition=function(){var o=t('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===o[0].offsetTop||15===o[0].offsetTop;return o.remove(),e}()),t.extend(a.defaults,{scrollbarWidth:t.scrollbarWidth(),fixed:t.support.fixedPosition,parent:t("body")}),e=t(o).width(),n.addClass("fancybox-lock-test"),i=t(o).width(),n.removeClass("fancybox-lock-test"),t("<style type='text/css'>.fancybox-margin{margin-right:"+(i-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery);