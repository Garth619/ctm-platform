!function(e,t,o){"use strict";o(document).ready(function(){function e(t){var i=[];return t.children("span").each(function(){var t=o(this);if(t.hasClass("element-cont")){var a=e(o(this));Array.isArray(a)&&a.length>0&&i.push(a)}else{var r={};r[t.data("id")]=t.data("html")?t.data("html"):"",i.push(r)}}),i}function i(e,t,a,r){"string"==typeof a&&(a=".header-wrapper-"+a+' [data-id="'+t+'"]'),o.each(e,function(e,s){if(Array.isArray(s)){var n=o(".porto-"+r+'-visible span[data-id="row"]').clone().addClass("porto-drop-item"+("sm"==r?"-mobile":""));n.children("b").remove(),n.appendTo(a),i(s,t,n,r)}else o.each(s,function(e,t){var i;i=o(".porto-"+r+'-visible span[data-id="'+e+'"]').hasClass("element-infinite")?o(".porto-"+r+'-visible span[data-id="'+e+'"]').clone().appendTo(a):o(".porto-"+r+'-visible span[data-id="'+e+'"]').appendTo(a),t&&i.data("html",t)})})}function a(i,a){if(i){var r=e(o("."+a+'[data-id="'+i+'"]'));t.customize.instance(i).set(JSON.stringify(r))}}function r(e,t){e.sortable({connectWith:"."+t,update:function(e,i){o(i.item).hasClass("element-cont")&&(o(i.item).contents().filter(function(){return 3===this.nodeType}).remove(),o(i.item).addClass(t).children("b").remove(),r(o(i.item),t)),a(o(i.item).closest("div").data("id"),t),o(i.sender).hasClass("element-cont")||a(o(i.sender).data("id"),t)},start:function(e,i){if(o(i.item).hasClass("element-cont")){var a=o(i.item).closest("."+t),r=a.data("ui-sortable"),s=r.containers,n=!1;o.each(s,function(e,t){void 0!==t&&o(t.element).is(o(i.item))&&(s.splice(e,1),n=!0)}),n&&(r.containers=s,a.data("ui-sortable",r))}o(i.item).hasClass("element-infinite")&&o(i.item).closest(".porto-header-builder-list").length&&o(i.item).clone().removeAttr("style").insertAfter(o(i.item))},stop:function(e,t){o(t.item).hasClass("element-infinite")&&o(t.item).closest(".porto-header-builder-list").length&&o(t.item).remove()}}).disableSelection()}function s(){o(".porto-drop-item").each(function(){var e=o(this).data("id");if(e&&t.customize.instance(e)&&t.customize.instance(e).get()){i(o.parseJSON(t.customize.instance(e).get()),e,"desktop","lg")}}),o(".porto-drop-item-mobile").each(function(){var e=o(this).data("id");if(e&&t.customize.instance(e)&&t.customize.instance(e).get()){i(o.parseJSON(t.customize.instance(e).get()),e,"mobile","sm")}}),r(o(".porto-drop-item"),"porto-drop-item"),r(o(".porto-drop-item-mobile"),"porto-drop-item-mobile")}function n(e){var t=o(e);if(!t.hasClass("lazy-load-active")){var i=t.data("original");i&&t.attr("src",i),t.addClass("lazy-load-active")}}s(),t.customize.section("porto_header_layouts")&&t.customize.section("porto_header_layouts").expanded.bind(function(e){e?o("#customize-control-porto_header_layouts_select select").val()&&(o(".porto-header-builder").addClass("active"),void 0!==t.customize.instance("porto_settings[header-type-select]")&&"header_builder"!=t.customize.instance("porto_settings[header-type-select]").get()&&o("#customize-control-porto_header_layouts_select select").trigger("change")):o(".porto-header-builder").removeClass("active")}),o("#customize-control-porto_header_layouts_select select").on("change",function(){if(o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_save_html_button").hide(),l=null,o(this).val()){var e=o(this);o(".porto-header-builder").addClass("active"),o(".porto_delete_header_layout_link, #customize-control-porto_header_layouts_custom_css").show(),e.attr("disabled","disabled"),o.ajax({url:customizer_admin_vars.ajax_url,data:{wp_customize:"on",action:"porto_load_header_elements",nonce:customizer_admin_vars.nonce,header_layout:e.val()},type:"post",dataType:"json",success:function(i){i&&i.elements&&o.each(t.customize.section("porto_header_builder").controls(),function(e,o){t.customize.instance(o.settings.default.id).set("")}),o(".porto-header-builder .header-builder-wrapper .porto-drop-item span:not(.element-infinite)").insertBefore(o(".porto-header-builder-list span.element-infinite").first()),o(".porto-header-builder .header-builder-wrapper .porto-drop-item").html(""),i&&i.elements&&o.each(i.elements,function(e,o){o&&t.customize.instance("porto_header_builder_elements["+e+"]").set(o)}),s(),e.removeAttr("disabled"),i&&i.custom_css?t.customize.instance("porto_header_builder[custom_css]").set(i.custom_css):t.customize.instance("porto_header_builder[custom_css]").set(""),i&&i.type?t.customize.instance("porto_header_builder[type]").set(i.type):t.customize.instance("porto_header_builder[type]").set("")}})}else o(".porto-header-builder").removeClass("active"),o(".porto_delete_header_layout_link, #customize-control-porto_header_layouts_custom_css").hide()});var l=null;if(o(document.body).on("click",'.porto-header-builder .header-builder-wrapper [data-id="html"], .porto-header-builder .header-builder-wrapper [data-id="porto_block"]',function(e){var t=!(null==l||!l.is(o(this))),i=o(this);"html"==i.data("id")?!t||o("#customize-control-porto_header_layouts_html_element").is(":hidden")?(o("#customize-control-porto_header_layouts_block_element").hide(),o("#customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_save_html_button").show(),o("#customize-control-porto_header_layouts_html_element textarea").focus(),i.data("html")?o("#customize-control-porto_header_layouts_html_element textarea").val(i.data("html")):o("#customize-control-porto_header_layouts_html_element textarea").val("")):o("#customize-control-porto_header_layouts_html_element").is(":visible")&&o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_save_html_button").hide():"porto_block"==i.data("id")&&(!t||o("#customize-control-porto_header_layouts_block_element").is(":hidden")?(o("#customize-control-porto_header_layouts_html_element").hide(),o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_save_html_button").show(),i.data("html")&&(o("#customize-control-porto_header_layouts_block_element select :selected").removeAttr("selected"),o('#customize-control-porto_header_layouts_block_element select option[value="'+escape(i.data("html"))+'"]').attr("selected","selected"))):o("#customize-control-porto_header_layouts_block_element").is(":visible")&&o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_save_html_button").hide()),l=o(this)}),o(document.body).on("click",".goto-header-builder",function(e){e.preventDefault(),t.customize.section("porto_header_layouts").focus()}),o(".porto-header-builder-tooltip").on("click",function(e){if(e.preventDefault(),o(this).data("id")){var i=o(this).data("type")?o(this).data("type"):"section";if(void 0===t.customize[i](o(this).data("id")))return;t.customize[i](o(this).data("id")).contentContainer&&o.redux.initFields(t.customize[i](o(this).data("id")).contentContainer),t.customize[i](o(this).data("id")).focus()}}),o(document.body).on("click",".porto_header_builder_save_html",function(){if(null==l)return!1;"html"==l.data("id")?(l.data("html",o("#customize-control-porto_header_layouts_html_element textarea").val()),o("#customize-control-porto_header_layouts_html_element textarea").val("")):"porto_block"==l.data("id")&&l.data("html",o("#customize-control-porto_header_layouts_block_element select").val()),a(l.closest("div").data("id"),"porto-drop-item"+(l.closest(".porto-drop-item-mobile").length?"-mobile":"")),o("#customize-control-porto_header_layouts_block_element, #customize-control-porto_header_layouts_html_element, #customize-control-porto_header_layouts_save_html_button").fadeOut()}),o(document.body).on("initReduxFields",function(e,t){o.redux.initFields(t)}),void 0!==o.redux){var c=["background","color_gradient","color"];o.redux.initFields=function(e){e||(e=o(".redux-section.open")),e.find(".redux-group-tab:visible .redux-field-init:visible").each(function(){var e=o(this).attr("data-type");e in redux.field_objects&&"function"==typeof redux.field_objects[e].init&&(c.push(e),redux.field_objects[e].init())}),e.find(".redux-image-select [data-original]").each(function(e,t){o.fn.waypoint?o(t).waypoint(function(e){n(t)},{offset:"140%"}):n(t)})};for(var d in c)c[d]in redux.field_objects&&redux.field_objects[c[d]].init()}o(".porto_reset_all_options").on("click",function(e){e.preventDefault(),confirm("Attention! This will remove all customizations made to the theme.")&&o.ajax({url:customizer_admin_vars.ajax_url,data:{wp_customize:"on",action:"porto_customizer_reset_options",nonce:customizer_admin_vars.nonce},type:"post",dataType:"json",success:function(e){t.customize.state("saved").set(!0),window.location.reload()}})}),o(".redux-info-field .goto-section").on("click",function(e){e.preventDefault();var i=o(this).closest(".redux-info-field").attr("id").replace("info-goto_","");o(this).hasClass("field-control")?(void 0!==t.customize.control("porto_settings["+i+"]").contentContainer&&o.redux.initFields(t.customize.control(i).container.closest(".control-section")),t.customize.control("porto_settings["+i+"]").focus()):(void 0!==t.customize.section(i).contentContainer&&o.redux.initFields(t.customize.section(i).contentContainer),t.customize.section(i).focus())}),o(".header-builder-header .preview-desktop").click(function(e){e.preventDefault(),o(".devices .preview-desktop").click(),o(this).siblings().removeClass("active"),o(this).addClass("active")}),o(".header-builder-header .preview-mobile").click(function(e){e.preventDefault(),o(".devices .preview-tablet").click(),o(this).siblings().removeClass("active"),o(this).addClass("active")}),o(".header-builder-header .button-close").click(function(e){e.preventDefault(),o("#sub-accordion-section-porto_header_layouts .customize-section-back").click()}),o(".header-builder-header .button-clear").click(function(e){e.preventDefault(),o(".header-builder-wrapper .header-builder").each(function(){var e=o(this);e.find("span:not(.element-infinite)").appendTo(e.parent().prev().find(".porto-header-builder-list")),e.find(".element-infinite").remove()}),o.each(t.customize.section("porto_header_builder").controls(),function(e,o){t.customize.instance(o.settings.default.id).set("")})}),void 0!==o.redux&&o("#customize-header-actions").append('<a href="#" class="button button-secondary switch-live-option-panel">Old Option Panel</a>')})}(wp.customize,wp,jQuery);