function wcpaInitMap(){var e={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",country:"long_name",postal_code:"short_name"};jQuery(".wcpa_type_placeselector").each(function(){var a=jQuery(this).find(".wcpa_google_place").get(0),t=jQuery(this),r=new google.maps.places.Autocomplete(a),i=new google.maps.Geocoder;if(r.addListener("place_changed",function(){var a=r.getPlace();for(var i in e)jQuery("."+i,t).val(""),jQuery("."+i,t).removeAttr("disabled","disabled");for(var n=0;n<a.address_components.length;n++){var c=a.address_components[n].types[0];if(e[c]){var o=a.address_components[n][e[c]];jQuery("."+c,t).val(o)}}a.geometry&&(jQuery(".wcpa_lat",t).val(a.geometry.location.lat()),jQuery(".wcpa_lng",t).val(a.geometry.location.lng()))}),t.find(".wcpa_map").length){var n=new google.maps.Map(t.find(".wcpa_map").get(0),{center:{lat:0,lng:0},zoom:15});r.bindTo("bounds",n);var c=new google.maps.Marker({map:n,draggable:!0,anchorPoint:new google.maps.Point(0,-29)});jQuery.post("https://www.googleapis.com/geolocation/v1/geolocate?key="+wcpa_global_vars.google_map_api,function(e){n.setCenter(e.location),c.setVisible(!1),c.setPosition(e.location),c.setVisible(!0)}),google.maps.event.addListener(c,"dragend",function(){jQuery(".wcpa_lat",t).val(c.getPosition().lat()),jQuery(".wcpa_lng",t).val(c.getPosition().lng()),i.geocode({latLng:c.getPosition()},function(a){for(var r in e)jQuery("."+r,t).val(""),jQuery("."+r,t).removeAttr("disabled","disabled");if(a&&a.length>0){jQuery(".wcpa_google_place",t).val(a[0].formatted_address),jQuery.wcpaIterate();for(var i=0;i<a[0].address_components.length;i++){var n=a[0].address_components[i].types[0];if(e[n]){var c=a[0].address_components[i][e[n]];jQuery("."+n,t).val(c)}}}})}),r.addListener("place_changed",function(){c.setVisible(!1);var e=r.getPlace();e.geometry?(e.geometry.viewport?n.fitBounds(e.geometry.viewport):(n.setCenter(e.geometry.location),n.setZoom(17)),c.setPosition(e.geometry.location),c.setVisible(!0)):window.alert("No details available for input: '"+e.name+"'")})}})}String.prototype.endsWith||(String.prototype.endsWith=function(e,a){return(void 0===a||a>this.length)&&(a=this.length),this.substring(a-e.length,a)===e}),String.prototype.startsWith||(String.prototype.startsWith=function(e,a){return this.substr(!a||a<0?0:+a,e.length)===e}),function($){function wcpa_upload_file(e){var a=e.prop("files")[0];if(void 0!==a){"object"==typeof e.data("wcpa_ajx_upload")&&e.data("wcpa_ajx_upload").abort();var t=e.val().match(/([^\/\\]+)$/)[1],r=e.parents(".wcpa_file_outer");if(r.find(".wcpa_file_name").removeClass("wcpa_file_error").html(t),e.is(".wcpa_ajax_upload")){var i=new FormData,n=e.data("details");i.append("wcpa_file",a),i.append("wcpa_file_details",JSON.stringify(n)),i.append("action","wcpa_ajax_upload"),!0===n.required&&e.attr("required","required");var c=$.ajax({type:"POST",url:wcpa_global_vars.ajax_url,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var a=Math.round(100*e.loaded/e.total);$("~ .wcpa_progress",r).css("width",a+"%")}},!1),e},beforeSend:function(){e.parent().addClass("wcpa_uploading"),e.parent().removeClass("wcpa_uploaded"),$("~ .wcpa_progress",r).show().css("width",0),$("~ .wcpa_file_hidden",r).val(""),e.parents("form").find(".single_add_to_cart_button").addClass("wcpa_disable_cart");var a=parseInt(e.parents("form").find(".single_add_to_cart_button").data("wcpa-upload-count"));isNaN(a)?a=1:a++,e.parents("form").find(".single_add_to_cart_button").data("wcpa-upload-count",a)},success:function(a){$("~ .wcpa_progress",r).show().css("width",100),e.parent().removeClass("wcpa_uploading"),$("~ .wcpa_progress",r).show(),e.val("");var t=parseInt(e.parents("form").find(".single_add_to_cart_button").data("wcpa-upload-count"));isNaN(t)||1===t?(t=0,e.parents("form").find(".single_add_to_cart_button").removeClass("wcpa_disable_cart")):t--,e.parents("form").find(".single_add_to_cart_button").data("wcpa-upload-count",t),!0===a.status?(e.removeAttr("required"),$("~ .wcpa_progress",r).css("width","100%"),$("~ .wcpa_file_hidden",r).val(a.file.file+"||"+a.file.file_name),e.parent().addClass("wcpa_uploaded")):($("~ .wcpa_progress",r).css("width",0),r.find(".wcpa_file_name").addClass("wcpa_file_error").html(a.message))},error:function(a,t,i){$("~ .wcpa_progress",r).show().css("width",0);var n=parseInt(e.parents("form").find(".single_add_to_cart_button").data("wcpa-upload-count"));isNaN(n)||1===n?(n=0,e.parents("form").find(".single_add_to_cart_button").removeClass("wcpa_disable_cart")):n--,e.parents("form").find(".single_add_to_cart_button").data("wcpa-upload-count",n),"abort"!==i&&(e.val(""),r.find(".wcpa_file_name").addClass("wcpa_file_error").html(wcpa_global_vars.strings.ajax_upload_error)),e.parent().removeClass("wcpa_uploading")},async:!0,data:i,dataType:"json",cache:!1,contentType:!1,processData:!1});e.data("wcpa_ajx_upload",c)}}}$(document).on("click",".single_add_to_cart_button",function(e){$(this).is(".wcpa_disable_cart")&&(alert(wcpa_global_vars.strings.ajax_file_upload),e.preventDefault())});var total_price=0,total_fee=0,wcpa_price=function(e){return e.toFixed(wcpa_global_vars.wc_price_decimals).replace(".",wcpa_global_vars.wc_decimal_sep)};function exc_relations(ele_id){var $element=$("#"+ele_id);if(0==$element.length)return!1;var $relation=$element.data("rules");if(!$relation)return!1;var $rules=$relation.rules;$evel_str="",$rules.forEach(function(e){$evel_str+="(",e.rules.forEach(function(e){$evel_str+="(",eval_relation(e.rules,$element)?$evel_str+=" true ":$evel_str+=" false ",$evel_str+=") "+(!1!==e.operator?e.operator:"")+" "}),e.length>0&&($evel_str=$evel_str.match(/\(.*\)/g)[0]+" "),$evel_str+=") "+(!1!==e.operator?e.operator:"")+" "}),$rules.length>0&&($evel_str=$evel_str.match(/\(.*\)/g)[0]);var result=!1;try{result=eval($evel_str.replace(/or/gi,"||").replace(/and/gi,"&&"))}catch(e){return!1}if(result)if("show"==$relation.action){if(enable_fields($element),$element.is(":visible"))return!0;$element.show()}else{if(disable_fields($element),!$element.is(":visible"))return!0;$element.hide()}else if("show"==$relation.action){if(disable_fields($element),!$element.is(":visible"))return!0;$element.hide()}else{if(enable_fields($element),$element.is(":visible"))return!0;$element.show()}var related=$element.data("related");null!=related&&related.forEach(function(e){exc_relations(e)}),iterate($element.parents(".wcpa_form_outer"))}function disable_fields(e){e.find("select,input,file,textarea").attr("disabled","disabled")}function enable_fields(e){e.find("select,input,file,textarea").removeAttr("disabled"),e.is(".wcpa_type_color")&&$(".wcpa_colorpicker",e).spectrum({preferredFormat:"hex",showInput:!0,allowEmpty:!0})}function eval_relation(e,a){if("quantity"===e.cl_field)var t=a.parents("form").find(".quantity input[name=quantity]");else if("attribute"===e.cl_field)t=a.parents("form.variations_form").find(".variations select[name=attribute_"+e.cl_relation+"]");else t=$("#"+e.cl_field);if(!t.length)return!1;if("0"===e.cl_relation)return!1;var r=Array();if(t.is(":visible")||$.inArray(t.data("type"),["hidden"])>=0)if($.inArray(t.data("type"),["text","color","hidden"])>=0)t.find("input").val()&&r.push(t.find("input").val().toLowerCase().trim());else if($.inArray(t.data("type"),["file"])>=0)t.find("input").val()?r.push(t.find("input").val().split("\\").pop().toLowerCase()):t.parents(".wcpa_form_item").length&&($temp=t.parents(".wcpa_form_item").find(".wcpa_file_hidden").val(),2===$temp.split("||").length&&r.push($temp.split("||")[1].toLowerCase()));else if($.inArray(t.data("type"),["number"])>=0)t.find("input").val()&&r.push(parseFloat(t.find("input").val().toLowerCase().trim()));else if("quantity"===e.cl_field)t.val()&&r.push(parseFloat(t.val().toLowerCase().trim()));else if($.inArray(t.data("type"),["textarea"])>=0)t.find("textarea").val()&&r.push(t.find("textarea").val().toLowerCase().trim());else if($.inArray(t.data("type"),["checkbox-group","radio-group"])>=0)r=t.find("input:checked").map(function(){return $(this).hasClass("wcpa_other")?$.inArray(e.cl_relation,["contains","not_contains","starts_with","ends_with"])>=0?$(this).val().replace("WCPAOTH ","").toLowerCase():"other":$(this).val().toLowerCase()}).get();else if($.inArray(t.data("type"),["select"])>=0)t.find("select").val()&&t.find("select").val().constructor===Array?r=t.find("select").val().map(function(e){return e.toLowerCase()}):t.find("select").val()&&r.push(t.find("select").val().toLowerCase());else if($.inArray(t.data("type"),["date","datetime-local"])>=0){if(t.find("input").val())if($.inArray(e.cl_relation,["contains","not_contains","starts_with","ends_with"])>=0)r.push(t.find("input").val().toLowerCase());else"function"==typeof(i=new Date(t.find("input").val())).getTime&&r.push(i.getTime())}else if($.inArray(t.data("type"),["time"])>=0){if(t.find("input").val())if($.inArray(e.cl_relation,["contains","not_contains","starts_with","ends_with"])>=0)r.push(t.find("input").val().toLowerCase());else{var i=new Date("1/1/2018 "+t.find("input").val());r.push(i.getTime())}}else $.inArray(t.data("type"),["image-group","color-group"])>=0&&(r=t.find("input:checked").map(function(){return $(this).hasClass("wcpa_other")?$.inArray(e.cl_relation,["contains","not_contains","starts_with","ends_with"])>=0?$(this).val().replace("WCPAOTH ","").toLowerCase():"other":$(this).val().toLowerCase()}).get());var n=!1;if("attribute"===e.cl_field)return!!t.val()&&(r.push(t.val().toLowerCase()),n=e.cl_val.value?e.cl_val.value:e.cl_val,$.inArray(n,r)>=0);if(0==r.length)switch(e.cl_relation){case"is_empty":return 0===r.length||""===r[0];case"is_not_empty":return 0!==r.length&&""!==r[0];default:return!1}if(e.cl_val&&"quantity"===e.cl_field)n=parseInt(e.cl_val.value?e.cl_val.value:e.cl_val);else if(e.cl_val&&"image-group"==t.data("type"))n=(e.cl_val.i?e.cl_val.i:e.cl_val).toLowerCase();else if(!e.cl_val||"date"!=t.data("type")&&"datetime-local"!=t.data("type"))if(e.cl_val&&"time"==t.data("type")){if($.inArray(e.cl_relation,["contains","not_contains","starts_with","ends_with"])>=0)n=e.cl_val.toLowerCase();else n=new Date("1/1/2018 "+e.cl_val).getTime()}else e.cl_val&&"number"==t.data("type")?n=parseFloat(e.cl_val.value?e.cl_val.value:e.cl_val):e.cl_val&&(n=(e.cl_val.value?e.cl_val.value:e.cl_val).toLowerCase());else{if($.inArray(e.cl_relation,["contains","not_contains","starts_with","ends_with"])>=0)n=e.cl_val.toLowerCase();else n=new Date(e.cl_val).getTime()}switch(e.cl_relation){case"is":return $.inArray(n,r)>=0;case"is_not":return!($.inArray(n,r)>=0);case"is_empty":return 0===r.length||""===r[0];case"is_not_empty":return 0!==r.length&&""!==r[0];case"is_greater":for(var c=0;c<r.length;c++)if(parseFloat(r[c])>parseFloat(n))return!0;return!1;case"is_lessthan":for(c=0;c<r.length;c++)if(parseFloat(r[c])>=parseFloat(n))return!1;return!0;case"is_greater_or_eqaul":for(c=0;c<r.length;c++)if(parseFloat(r[c])>=parseFloat(n))return!0;return!1;case"is_lessthan_or_eqal":for(c=0;c<r.length;c++)if(parseFloat(r[c])>parseFloat(n))return!1;return!1;case"contains":for(c=0;c<r.length;c++)if(-1!==r[c].indexOf(n))return!0;return!1;case"not_contains":for(c=0;c<r.length;c++)if(-1!==r[c].indexOf(n))return!1;return!0;case"starts_with":for(c=0;c<r.length;c++)if(r[c].startsWith(n))return!0;return!1;case"ends_with":for(c=0;c<r.length;c++)if(r[c].endsWith(n))return!0;return!1;case"date_is":case"time_is":return $.inArray(n,r)>=0;case"date_is_before":case"time_is_before":for(c=0;c<r.length;c++)if(parseFloat(r[c])>=parseFloat(n))return!1;return!0;case"date_is_after":case"time_is_after":for(c=0;c<r.length;c++)if(parseFloat(r[c])>parseFloat(n))return!0;return!1}}function iterate(e,a){if(void 0===a&&(a=!0),a&&$(".wcpa_form_item",e).data("wcpa_price",!1),e.data("wcpa_deps_counter",0),total_price=0,total_fee=0,$(".wcpa_has_price",e).each(function(a,t){if(!$(this).parent().is(":visible"))return!0;$(this).val();if($(this).is("select")){$(this);$(this).find("option").each(function(){wcpa_update_price($(this),e.data("product"))})}else wcpa_update_price($(this),e.data("product"))}),e.data("wcpa_deps_counter")>0)iterate(e,!1);else if($(".wcpa_has_price",e).length){var t=+e.data("product").wc_product_price,r=e.data("rules"),i=parseInt(e.parents("form").find(".quantity input[name=quantity]").val());if(r&&!0===r.pric_overide_base_price)var n=Math.max(t,total_price);else if(r&&!0===r.pric_overide_base_price_if_gt_zero&&total_price>0)n=total_price;else n=t+total_price;wcpa_global_vars.change_price_as_quantity?(e.next(".wcpa_price_summary").find(".wcpa_options_total .price_value").text(wcpa_price((total_price-total_fee)*i+total_fee)),e.next(".wcpa_price_summary").find(".wcpa_product_total .price_value").text(wcpa_price(t*i)),e.next(".wcpa_price_summary").find(".wcpa_total .price_value").text(wcpa_price((n-total_fee)*i+total_fee))):(e.next(".wcpa_price_summary").find(".wcpa_options_total .price_value").text(wcpa_price(total_price)),e.next(".wcpa_price_summary").find(".wcpa_product_total .price_value").text(wcpa_price(t)),e.next(".wcpa_price_summary").find(".wcpa_total .price_value").text(wcpa_price(n))),e.data("wcpa",{fee:total_fee,price:{options:total_price,product:t,total:n}}),e.trigger("wcpa.price_updated")}}function wcpa_update_price(e,a){var t=e.data("price"),r=parseInt(e.parents("form").find(".quantity input[name=quantity]").val()),i=0,n=0;if(!t)t=e.find(":selected").data("price");t||(t={type:!1,priceoptions:!1,value:!1,pricingType:!1,taxpu:1,con_unit:1});var c=e.val().trim();$.inArray(t.type,["radio-group","checkbox-group","image-group","color-group"])>=0&&!e.is(":checked")&&(c=!1),$.inArray(t.type,["select"])>=0&&!e.is(":selected")&&(c=!1),e.hasClass("wcpa_other")&&$.inArray(t.type,["radio-group","checkbox-group","image-group","color-group"])>=0&&e.is(":checked")&&(c=e.nextAll(".wcpa_other_val").val().trim()),$.inArray(t.type,["paragraph","header"])>=0&&(c=1),$.inArray(t.type,["file"])>=0&&""==c&&e.parents(".wcpa_form_item").find(".wcpa_file_hidden").length&&""!==e.parents(".wcpa_form_item").find(".wcpa_file_hidden").val()&&(c=e.parents(".wcpa_form_item").find(".wcpa_file_hidden").val().split("||")[1]),i=calculate_price(t.pricingType,c,t.value,r,a),"custom"!=t.pricingType&&"percentage"!=t.pricingType||t.taxpu&&(i*=t.taxpu),t.con_unit&&(i*=t.con_unit),total_price+=i,void 0!==t.is_fee&&!0===t.is_fee&&(total_fee+=i),e.data("elem_price",i),e.is("option")?(e.parent().find(":checked").each(function(){n+=$(this).data("elem_price")?$(this).data("elem_price"):0}),e.parents(".wcpa_form_item").data("wcpa_price",n/(t.taxpu*t.con_unit)).find(".price_value").text(wcpa_price(n))):"checkbox-group"==t.type?(e.parents(".checkbox-group").find("input:checked").each(function(){n+=$(this).data("elem_price")?$(this).data("elem_price"):0}),e.parents(".wcpa_form_item").data("wcpa_price",n/(t.taxpu*t.con_unit)).find(".price_value").text(wcpa_price(n))):"radio-group"==t.type?(e.parents(".radio-group ").find("input:checked").each(function(){n+=$(this).data("elem_price")?$(this).data("elem_price"):0}),e.parents(".wcpa_form_item").data("wcpa_price",n/(t.taxpu*t.con_unit)).find(".price_value").text(wcpa_price(n))):"image-group"==t.type?(e.parents(".image-group ").find("input:checked").each(function(){n+=$(this).data("elem_price")?$(this).data("elem_price"):0}),e.parents(".wcpa_form_item").data("wcpa_price",n/(t.taxpu*t.con_unit)).find(".price_value").text(wcpa_price(n))):"color-group"==t.type?(e.parents(".color-group ").find("input:checked").each(function(){n+=$(this).data("elem_price")?$(this).data("elem_price"):0}),e.parents(".wcpa_form_item").data("wcpa_price",n/(t.taxpu*t.con_unit)).find(".price_value").text(wcpa_price(n))):e.parents(".wcpa_form_item").data("wcpa_price",i/(t.taxpu*t.con_unit)).find(".price_value").text(wcpa_price(i))}function calculate_price(pricingType,value,price,quantity,$product_data){"custom"!==pricingType&&(null!==price&&!1!==price&&"string"==typeof price&&(price=parseFloat(price.replace(wcpa_global_vars.wc_decimal_sep,"."))),isNaN(price)&&(price=0));var elem_price=0;switch(pricingType){case"fixed":elem_price=value?+price:0;break;case"per_car":elem_price=value.length*price;break;case"multiply":elem_price=value?+price*(isNaN(value)?1:value):0,elem_price<0&&(elem_price=0);break;case"custom":if(!1!==value&&""!==value&&null!==value){var formula=price.replace(/{value}/g,value).replace(/{quantity}/g,quantity).replace(/{value.length}/g,value.length).replace(/{product_price}/g,$product_data.wc_product_price);if(formula.match(/\{(\s)*?field\.([^}]*)}/)){var matches=formula.match(/\{(\s)*?field\.([^}]*)}/g);for(var i in matches){var mat=matches[i].match(/\{(\s)*?field\.([^}]*)}/);if(void 0!==mat[2]&&"string"==typeof mat[2]){var ele=mat[2].split(".");if(ele.length>1&&$.inArray(ele[1],["value","price"])>=0){var $ele=$("#"+ele[0]);if($ele.length){var val=0;if($ele.is(":visible"))switch(ele[1]){case"price":if($ele.find(".wcpa_has_price").length){if(void 0===$ele.data("wcpa_price")||!1===$ele.data("wcpa_price")){elem_price=0;var wcpa_deps_counter=$ele.parents(".wcpa_form_outer").data("wcpa_deps_counter");return wcpa_deps_counter=void 0===wcpa_deps_counter?0:wcpa_deps_counter,wcpa_deps_counter+=1,$ele.parents(".wcpa_form_outer").data("wcpa_deps_counter",wcpa_deps_counter),elem_price}val=$ele.data("wcpa_price")}break;case"value":switch($ele.data("type")){case"select":val=$ele.find("select").val()?$ele.find("select").val():0;break;case"textarea":val=$ele.find("textarea").val()?$ele.find("textarea").val():0;break;case"checkbox-group":case"radio-group":case"color-group":case"image-group":val=0,$ele.find("input:checked").length?1==$ele.find("input:checked").length?isNaN($ele.find("input:checked").val())?val=$ele.find("input:checked").val():val+=parseFloat($ele.find("input:checked").val()):$ele.find("input:checked").each(function(e){if(isNaN($(this).val())){if(0==e)return val=$(this).val(),!1}else val+=parseFloat($(this).val())}):val=0;break;default:val=$ele.find("input").val()?$ele.find("input").val():0}}}else var val=0;var myReg=new RegExp(mat[0]);formula=isNaN(val)?formula.replace(myReg,"'"+val+"'"):formula.replace(myReg,val)}}}}try{elem_price=eval(formula)}catch(e){elem_price=0}}else elem_price=0;break;case"percentage":elem_price=value?price*$product_data.wc_product_price/100:0}return elem_price}function preview_image(){jQuery(".wcpa_img_preview .wcpa_image img,.wcpa_cart_img_preview img").hover(function(e){var a=$(this).parent(".wcpa_image").find("label").text(),t=a||"";jQuery("body").append("<p id='wcpa_img_preview'><img src='"+$(this).attr("src")+"' alt='Image preview' />"+t+"</p>"),jQuery("#wcpa_img_preview").css("top",e.pageY-10+"px").css("left",e.pageX+30+"px").fadeIn("fast")},function(){jQuery("#wcpa_img_preview").remove()}),jQuery(".wcpa_img_preview .wcpa_image img,.wcpa_cart_img_preview img").mousemove(function(e){jQuery("#wcpa_img_preview").css("top",e.pageY-10+"px").css("left",e.pageX+30+"px")})}$.wcpaInit=function(){preview_image(),$(".wcpa_form_outer").each(function(){if($form_outer=$(this),void 0!==$form_outer.data("wcpa"))return!0;("undefined"!=typeof wcpa_global_vars&&($(".wcpa_datepicker",$form_outer).length&&$(".wcpa_datepicker",$form_outer).each(function(){var e=$(this).data("dpconf");null==e&&(e={}),$(this).datetimepicker($.extend({timepicker:!1,validateOnBlur:!1,scrollInput:!1,format:wcpa_global_vars.date_format},e))}),$(".wcpa_datetimepicker",$form_outer).length&&$(".wcpa_datetimepicker",$form_outer).each(function(){var e=$(this).data("dpconf");null==e&&(e={}),$(this).datetimepicker($.extend({format:wcpa_global_vars.date_format+" "+wcpa_global_vars.time_format,validateOnBlur:!1,scrollInput:!1,step:15},e))}),$(".wcpa_timepicker",$form_outer).length&&$(".wcpa_timepicker",$form_outer).each(function(){var e=$(this).data("dpconf");null==e&&(e={}),$(this).datetimepicker($.extend({datepicker:!1,format:wcpa_global_vars.time_format,validateOnBlur:!1,scrollInput:!1,step:15},e))}),$(".wcpa_colorpicker",$form_outer).length&&$(".wcpa_colorpicker",$form_outer).spectrum({preferredFormat:"hex",showInput:!0,allowEmpty:!0}),void 0!==$.datetimepicker&&""!==document.documentElement.lang&&$.datetimepicker.setLocale(document.documentElement.lang.substring(0,2))),$(".wcpa_type_checkbox-group .wcpa_required input,\n            .wcpa_type_radio-group .wcpa_required input,\n            .wcpa_type_image-group .wcpa_required input,\n \n  .wcpa_type_color-group .wcpa_required input",$form_outer).on("change",function(){var e=$(this).parents(".wcpa_form_item");$(".wcpa_required input[type=checkbox]",e).length?0!=$(".wcpa_required input[type=checkbox]:checked",e).not(".wcpa_other").length||0!=$(".wcpa_required .wcpa_other_val",e).length&&""!=$(".wcpa_required .wcpa_other_val",e).val()?$(".wcpa_required input[type=checkbox]:first",e).removeAttr("required"):$(".wcpa_required input[type=checkbox]:first",e).attr("required","required"):$(".wcpa_required input[type=radio]",e).length&&(0!=$(".wcpa_required input[type=radio]:checked",e).not(".wcpa_other").length||0!=$(".wcpa_required .wcpa_other_val",e).length&&""!=$(".wcpa_required .wcpa_other_val",e).val()?($(".wcpa_required input[type=radio]:first",e).removeAttr("required"),$(".wcpa_required .wcpa_other_val",e).removeAttr("required")):($(".wcpa_required input[type=radio]:first",e).attr("required","required"),$(".wcpa_required input[type=radio].wcpa_other",e).is(":checked")&&$(".wcpa_required .wcpa_other_val",e).attr("required","required")))}),$(".wcpa_file_custom",$form_outer).on("keyup change",function(){wcpa_upload_file($(this))}),$(".image-group .wcpa_image img",$form_outer).on("click",function(){var e=$("#"+$(this).attr("for"));e.prop("checked",!e.prop("checked")),e.trigger("change")}),$(".color-group .wcpa_color label",$form_outer).on("click",function(){var e=$("#"+$(this).attr("for")),a=e.prop("checked");setTimeout(function(){a&&(e.prop("checked",!1),e.trigger("change"))},0),e.trigger("change")}),$(".wcpa_other_val",$form_outer).on("keyup change",function(){$.trim($(this).val()).length>0?$(this).siblings(".wcpa_other").val("WCPAOTH "+$(this).val()):$(this).siblings(".wcpa_other").val("")}),"undefined"!=typeof wcpa_global_vars&&$form_outer.data("product").is_variable)&&($form_outer.parents("form").find(".single_variation_wrap").on("show_variation",function(e,a){var t=$form_outer.data("product");t.wc_product_price=a.display_price,$form_outer.data("product",t),iterate($form_outer)}),$form_outer.parents("form").on("woocommerce_variation_has_changed",function(e){var a=$form_outer.data("attrrelated");null!=a&&a.forEach(function(e){exc_relations(e)})}));if($(".wcpa_has_price,.wcpa_has_price ~ .wcpa_other_val,.wcpa_has_price_related input,.wcpa_has_price_related select,.wcpa_has_price_related textarea",$form_outer).on("keyup change",function(){iterate($form_outer)}),$(".quantity input[name=quantity]",$form_outer.parents("form")).length){var e=$form_outer.data("qntyrelated");null!=e&&e.forEach(function(e){exc_relations(e)})}$(".quantity input[name=quantity]",$form_outer.parents("form")).on("keyup change",function(){var e=$form_outer.data("qntyrelated");null!=e&&e.forEach(function(e){exc_relations(e)}),iterate($form_outer)}),$(".wcpa_has_relation input,.wcpa_has_relation select",$form_outer).on("keyup change",function(){var e=$(this).parents(".wcpa_has_relation").data("related");null!=e&&e.forEach(function(e){exc_relations(e)})}),$(".wcpa_has_relation",$form_outer).each(function(){var e=$(this).data("related");null!=e&&e.forEach(function(e){exc_relations(e)})}),$form_outer.data("wcpa",{}),iterate($form_outer),$(".variations_form .variations").length&&setTimeout(function(){$(".variations_form  .variations select").trigger("change")},0)})},$(document).ready(function(){$.wcpaInit()}),$.wcpaIterate=function(){$(".wcpa_form_outer").each(function(){iterate($(this))})}}(jQuery),jQuery(document).on("qv_loader_stop",function(){jQuery.wcpaInit()});